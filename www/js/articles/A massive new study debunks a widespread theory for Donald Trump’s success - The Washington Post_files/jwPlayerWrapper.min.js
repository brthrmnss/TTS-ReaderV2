window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var queryStringObject=function(){if(!window.location.search)return{};for(var t=window.location.search.slice(1).split("&"),d=t.length,f={},e=0;e<d;e++){var c=t[e].split("=");c[0]&&(2>c.length&&c.push(""),f[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))}return f};
function getAspectRatio(t,d){if(t&&d){var f=function(c,d){return 0===d?c:f(d,c%d)},e=f(t,d);return t/e+":"+d/e}console.log("getAspectRatio: please pass in a width and height");return null}var queryStringObj=queryStringObject(),createTemplate=function(){var t={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g};return function(d){var f=_.templateSettings;_.templateSettings=t;template=_.template(d);_.templateSettings=f;return template}}();
function jwPlayerWrapper(){TWP=window.TWP||{};TWP.PostTV=TWP.PostTV||{};TWP.PostTV.players=TWP.PostTV.players||{};TWP.hpRefreshTests=TWP.hpRefreshTests||[];TWP.PostTV.adFrequency=TWP.PostTV.adFrequency||.5;TWP.PostTV.inverseAdFrequency=TWP.PostTV.inverseAdFrequency||1/TWP.PostTV.adFrequency;TWP.PostTV.blankAdSetCode=TWP.PostTV.blankAdSetCode||"347e498d32924a56a51c7beca90b8b02";TWP.PostTV.jwPlayerConfig=TWP.PostTV.jwPlayerConfig||{};String.prototype.endsWith=function(d){return-1!==this.indexOf(d,this.length-
d.length)};TWP.PostTV.EVENTS=$.extend(TWP.PostTV.EVENTS,{PLAYER_SERVICE_INITIALIZED:"playerServiceInitialized",DESTROY:"destroy",ERROR:"videoError",SEND_TRACKING_DATA:"sendTrackingData",SEEK:"seek",SET_VOLUME:"setVolume",SKIP_AD:"skipAd",PLAY:"play",PAUSE:"pause",PLAYING:"playing",PAUSED:"paused",PLAY_NEXT_VIDEO:"playNextVideo",PLAYER_CREATED:"playerCreated",OO_PLAYER_INITIALIZED:"ooPlayerInitialized",OO_PLUGIN_LOADED:"ooPluginLoaded",OO_PLUGIN_FULLY_LOADED:"ooPluginFullyLoaded",WILL_CHANGE_EMBED_CODE:"willChangeEmbedCode",
CONTENT_TREE_FETCHED:"contentTreeFetched",PLAYBACK_READY:"playbackReady",PLAYHEAD_TIME_CHANGED:"playheadTimeChanged",COMPANION_ADS_DISPLAYED:"companionAdsDisplayed",AD_STARTED:"adStarted",ADS_CLEARED:"adsCleared",FIRST_FRAME:"firstFrame",EDITORIAL_PLAY_STARTED:"editorialPlayStarted",PLAY_COMPLETED:"ooPlayCompleted",NEED_RESIZE_VIDEO_ELEMENT:"needResizeVideoElement",SCRUBBER_NEEDS_ADJUSTMENT:"scrubberNeedsAdjustment",VOLUME_CHANGED:"volumeChanged",CAST_READY:"castReady",CAST_VIDEO:"castVideo",CAST_STARTED:"castStarted",
CAST_FINISHED:"castFinished",CAST_PAUSE:"castPause",CAST_PLAY:"castPlay",CAST_SEEK:"castSeek",CAST_NEXT_VIDEO:"castNextVideo",CAST_PROGRESS:"castProgress",FULLSCREEN_CHANGED:"fullscreenChanged",RESIZE:"resize",SHOW_PROMO_SCREEN:"showPromoScreen"});TWP.PostTV.loadedResources=!0;TWP.PostTV.isFlashEnabled=function(){if(TWP.PostTV.mozFlashBlockedReason)return!1;var d=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),d=!0}catch(f){void 0!=navigator.mimeTypes["application/x-shockwave-flash"]&&(d=
!0)}return d}();TWP.PostTV.areCookiesEnabled=TWP.PostTV.areCookiesEnabled||function(){var d=navigator.cookieEnabled?!0:!1;"undefined"!=typeof navigator.cookieEnabled||d||(document.cookie="testcookie",d="testcookie"in document.cookie?!0:!1);return d};TWP.PostTV.isStorageEnabled=TWP.PostTV.isStorageEnabled||function(){var d=window.localStorage?!0:!1;if(d)try{localStorage.setItem("videolsenabled","true")}catch(f){d=!1}return d};TWP.PostTV.getCookie=TWP.PostTV.getCookie||function(d){d+="=";for(var f=
document.cookie.split(";"),e=0;e<f.length;e++){for(var c=f[e];" "==c.charAt(0);)c=c.substring(1,c.length);if(0==c.indexOf(d))return c.substring(d.length,c.length)}return null};TWP.PostTV.getStorage=TWP.PostTV.getStorage||function(d){return window.localStorage.getItem(d)};TWP.PostTV.incrementCountingCookie=TWP.PostTV.incrementCountingCookie||function(d,f){d&&(f=f||{},TWP.PostTV.setCookie(d,TWP.PostTV.getCountingCookie(d)+1,f.expires,f.path,f.domain,f.secure))};TWP.PostTV.incrementCountingStorage=TWP.PostTV.incrementCountingStorage||
function(d){d&&TWP.PostTV.setStorage(d,TWP.PostTV.getCountingStorage(d)+1)};TWP.PostTV.getCountingCookie=TWP.PostTV.getIntegerCookie||function(d){var f=0;d&&TWP.PostTV.areCookiesEnabled()&&(d=TWP.PostTV.getCookie(d),f=isNaN(parseInt(d))?0:parseInt(d),f=0>f?0:f);return f};TWP.PostTV.getCountingStorage=TWP.PostTV.getCountingStorage||function(d){var f=0;d&&TWP.PostTV.isStorageEnabled()&&(d=TWP.PostTV.getStorage(d),f=isNaN(parseInt(d))?0:parseInt(d),f=0>f?0:f);return f};TWP.PostTV.getFlagCookie=TWP.PostTV.getFlagCookie||
function(d){var f=0;d&&TWP.PostTV.areCookiesEnabled()&&(d=TWP.PostTV.getCookie(d),f=isNaN(parseInt(d))?0:parseInt(d),f=0>f?0:f);return f%2};TWP.PostTV.getFlagStorage=TWP.PostTV.getFlagStorage||function(d){var f=0;d&&TWP.PostTV.isStorageEnabled()&&(d=TWP.PostTV.getStorage(d),f=isNaN(parseInt(d))?0:parseInt(d),f=0>f?0:f);return f%2};TWP.PostTV.toggleFlagCookie=TWP.PostTV.toggleFlagCookie||function(d,f){d&&(f=f||{},TWP.PostTV.setCookie(d,(TWP.PostTV.getFlagCookie(d)+1)%2,f.expires,f.path,f.domain,f.secure))};
TWP.PostTV.toggleFlagStorage=TWP.PostTV.toggleFlagStorage||function(d){d&&TWP.PostTV.setStorage(d,(TWP.PostTV.getFlagStorage(d)+1)%2)};TWP.PostTV.setCookie=function(d,f,e,c,p,h){document.cookie=d+"="+escape(f)+(e?"; expires="+e:"")+(c?"; path="+c:"; path=/")+(p?"; domain="+p:"; domain="+(/(?:[^\.]+)(\.([^\.]+\.){1,}[^\.]+)$/.test(document.location.host)?RegExp.$1:document.location.host))+(h?"; secure":"")};TWP.PostTV.setStorage=TWP.PostTV.setStorage||function(d,f){TWP.PostTV.isStorageEnabled()&&window.localStorage.setItem(d,
f)};TWP.PostTV.videoPlays=TWP.PostTV.videoPlays||0;TWP.PostTV.getCount=TWP.PostTV.getCount||function(){return 0<=window.location.host.indexOf("local")||"8080"===location.port?function(){return TWP.PostTV.videoPlays}:function(){return TWP.PostTV.getCountingStorage("videoplays")}}();TWP.PostTV.incrementCount=TWP.PostTV.incrementCount||function(){TWP.PostTV.videoPlays++;TWP.PostTV.incrementCountingStorage("videoplays")};TWP.PostTV.getPreRollsBlocked=TWP.PostTV.getPreRollsBlocked||function(){return TWP.PostTV.getFlagStorage("adsflag")};
TWP.PostTV.togglePreRollsBlocked=TWP.PostTV.togglePreRollsBlocked||function(){TWP.PostTV.toggleFlagStorage("adsflag")};TWP.PostTV.isTWPBeta=function(){var d=TWP.PostTV.getCookie("X-WP-Split");return d?"B"===d.toUpperCase():!1}();TWP.PostTV.BrowserInfo=TWP.PostTV.BrowserInfo||{init:function(d){this.userAgentStr=d;this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(this.userAgentStr)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=
this.searchString(this.dataOS)||"an unknown OS";this.deviceType=this.lookUpDeviceType(this.dataDeviceType)||0;this.setupWebview();this.setupThinkAdBlock()},searchString:function(d){for(var f=0;f<d.length;f++){var e="undefined"===typeof d[f].string?this.userAgentStr:d[f].string,c=d[f].prop;this.version||(this.versionSearchString=d[f].versionSearch||d[f].identity);if(e){if(-1!=e.indexOf(d[f].subString))return d[f].identity}else if(c)return d[f].identity}},searchVersion:function(d){var f=d.indexOf(this.versionSearchString);
if(-1!=f)return d.substring(f+this.versionSearchString.length+1).match(/\d+(\.\d+)+/g)[0]},lookUpDeviceType:function(d){for(var f,e=0,c=d.length;e<c;e++)if(f="undefined"===typeof d[e].string?this.userAgentStr:d[e].string)if($.isArray(d[e].subString))for(var p=0,h=d[e].subString.length;p<h;p++){if(-1!=f.indexOf(d[e].subString[p]))return"number"===typeof d[e].type?d[e].type:this.lookUpDeviceType(d[e].type)}else{if(-1!=f.indexOf(d[e].subString))return"number"===typeof d[e].type?d[e].type:this.lookUpDeviceType(d[e].type);
if("undefined"!=typeof d[e].otherwise)return d[e].otherwise}},setupWebview:function(){var d=!1;"Android"==this.OS&&-1<this.userAgentStr.indexOf("Version")?d=!0:/iPhone|iPad/.test(this.OS)&&-1===this.userAgentStr.indexOf("Version")&&(d=!0);this.webview=d},setupThinkAdBlock:function(){var d=this;$(function(){0===$("#wpvCanary").length&&$("body").append('<div id="wpvCanary" class="bottomAd" style="color: white; height: 2px"></div>');d.thinkAdBlock=!!(0<$("#wpvCanary").filter(":hidden").length||0==$("#wpvCanary").filter(":visible").length)})},
dataBrowser:[{subString:"Silk",identity:"Silk"},{subString:"Edge",identity:"Edge",versionSearch:"Edge"},{subString:"OPR/",identity:"Opera",versionSearch:"OPR"},{subString:"Chrome",identity:"Chrome"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{subString:"Firefox",identity:"Firefox"},{subString:"Netscape",identity:"Netscape"},{subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{subString:"Trident",
identity:"Explorer",versionSearch:"rv"},{subString:"Android",identity:"Android Stock Browser",versionSearch:"Android"},{subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{subString:"Silk",identity:"Android for Kindle"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{subString:"iPhone",identity:"iPhone"},{subString:"iPad",identity:"iPad"},{subString:"Android",
identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],dataDeviceType:[{subString:["iPhone","iPod"],type:1},{subString:["iPad","Silk"],type:2},{subString:["Android"],type:[{subString:["Firefox"],type:2},{subString:["Mobile"],type:1},{subString:null,otherwise:2}]},{subString:["Opera"],type:[{subString:["Mobi","Mini"],type:1}]},{subString:["AppleWebKit"],type:[{subString:["Mobile"],type:1}]},{subString:["Mobile"],type:1}]};TWP.PostTV.BrowserInfo.browser||TWP.PostTV.BrowserInfo.init(navigator.userAgent);
TWP.PostTV.isMobile="boolean"==typeof TWP.PostTV.isMobile?TWP.PostTV.isMobile:1==TWP.PostTV.BrowserInfo.deviceType;TWP.PostTV.isTablet=2==TWP.PostTV.BrowserInfo.deviceType;TWP.PostTV.isDeskweb=!(TWP.PostTV.isMobile||TWP.PostTV.isTablet);TWP.PostTV.shouldNotPlayPrerollAds="undefined"!=typeof TWP.PostTV.shouldNotPlayPrerollAds?TWP.PostTV.shouldNotPlayPrerollAds:function(){var d=TWP.PostTV.getCookie("wapo_actmgmt"),f,e;if(d)for(var d=d.split("|"),c=0,p=d.length;c<p;c++)if(e=d[c].split(":"),"NO_PREROLL"==
e[0]){f=e[1];break}return"1"===f}();TWP.PostTV.enablePageRefresh=!!$("#enable-page-refresh").data("enablePageRefresh");TWP.PostTV.mobileTabletPageRefresh=!!$("#mobile-tablet-page-refresh").data("mobileTabletPageRefresh");TWP.PostTV.shouldRefreshPage=TWP.PostTV.enablePageRefresh&&TWP.PostTV.isDeskweb||TWP.PostTV.mobileTabletPageRefresh&&!TWP.PostTV.isDeskweb;TWP.PostTV.destroyWhenUpdate=!!$("#destroy-when-update").data("destroyWhenUpdate");TWP.PostTV.mobileTabletShowEndscreen=!!$("#mobile-tablet-show-endscreen").data("mobileTabletShowEndscreen");
TWP.PostTV.mobileTabletPlayNext=0===$("#mobile-tablet-show-endscreen").length?!0:!!$("#mobile-tablet-show-endscreen").data("mobileTabletPlayNext");TWP.PostTV.mobileForceAdSetCode=0===$("#mobile-force-adsetcode").length?void 0:$("#mobile-force-adsetcode").data("mobileForceAdsetcode");TWP.PostTV.tabletForceAdSetCode=0===$("#tablet-force-adsetcode").length?void 0:$("#tablet-force-adsetcode").data("tabletForceAdsetcode");TWP.PostTV.isUuidSpecifiedInUrl=$("#is-uuid-specified-in-url").data("isUuidSpecifiedInUrl");
TWP.PostTV.RecommendedVideos=function(d,f,e){var c=window.wp_pb&&wp_pb.contextPath?wp_pb.contextPath:window.location.protocol+"//www.washingtonpost.com/video",p=$('script[src*="jwPlayerWrapper.js"], script[src*="jwPlayerWrapper.min.js"]').attr("src");if(p){var h=-1<p.indexOf("/static/js/posttv")?p.indexOf("/static/js/posttv"):p.indexOf("/resources/js/posttv");-1<h&&(c=p.substr(0,h),0===c.indexOf("//")&&(c=window.location.protocol+c))}var g=window.queryStringObj&&"true"==queryStringObj.ptvdebugendscreentimeout?
!0:!1,a=-1,C=!1,m=[],u=function(c){if(0<=a)if(c=isNaN(Number(c))?1:Number(c),a+=c,m.length)for(;a>=m.length;)a-=m.length;else a=-1;return a},n=function(a,d,f,e){d=encodeURIComponent(d);d=-1<window.location.hostname.indexOf("local")?"//posttvapi.wpprivate.com/posttv-api/api/v1/videos/recommended?permaLinkUrl="+d:0===c.indexOf("http")||0===c.indexOf("//")?"//js.washingtonpost.com"+c.slice(c.indexOf("washingtonpost.com")+18)+"/endscreen?permaLinkUrl="+d:"//js.washingtonpost.com"+c+"/endscreen?permaLinkUrl="+
d;g&&(d=d.replace("js.washingtonpost.com","10.255.255.1").replace("posttvapi.wpprivate.com","10.255.255.1"));$.ajax({type:"GET",cache:!0,url:d,data:{resType:"jsonp"},contentType:"application/json",jsonp:"cb",jsonpCallback:"cb_"+a.replace(/-/g,""),timeout:TWP.PostTV.jwPlayerConfig.endscreenVideosWaitTime?1E3*TWP.PostTV.jwPlayerConfig.endscreenVideosWaitTime:8E3,dataType:"jsonp"}).success(f).error(e,function(){f([])})},p=function(c,d,f){var e=function(c){a=c.length?0:-1;m=c;"function"===typeof d&&d(m,
a)},g=function(a){"function"===typeof f?f(a):console.error("RecommendedVideos - ERROR:",a)},h=c.contentConfig.uuid||c.liveEventConfig.uuid;c&&c.contentConfig&&c.contentConfig.permaLinkURL?(C=!0,n(h,c.contentConfig.permaLinkURL,e,g)):g({error:"videoData object missing contentConfig.permaLinkURL"})},h={setup:p,fetch:p,requested:function(){return C},loaded:function(){return m.length?!0:!1},clear:function(){m=[]},getAll:function(){return m},getCount:function(){return m.length},hasRecommendedVideos:function(){return 0<
m.length},getVideo:function(){return m[a]?m[a]:null},getNextVideo:function(){var c=m[a]?m[a]:null;u();return c},getVideos:function(c){var d=a,f=[];if(m.length)for(;f.length<c;)f.push(m[d]),d++,d>=m.length&&(d=0);return f},getIndex:function(){return a},incIndex:u};d&&p(d,f,e);return h};TWP.PostTV.AdManager=function(d){var f,e,c,p,h,g,a,C,m,u,n,w,x,y=!1,I=!1,l={},E,D,F,z,v,t,G,b,r,k=createTemplate('\t\t<div\t\t\tclass="ptv-ad-bar-vast"\t\t\tid="<%= playerID %>-ad-bar"\t\t\tstyle="width: 100%; height: 22px; position: absolute; right: 0px; top: 0px; pointer-events: auto; font-family: Helvetica; background-color: #000; background-color: rgba(0,0,0, 0.7); z-index: 2;"\t\t>\t\t\t<% if (display.playPauseControl) { %><img id="<%= playerID %>-play-control" style="position: absolute; left: 0px; top: 0px; width: auto; height; auto;"><% } %>\t\t\t<% if (display.muteControl) { %><img id="<%= playerID %>-mute-control" style="position: absolute; left: 25px; top: 1px; width: auto; height: auto;"><% } %>\t\t\t<div id="<%= playerID %>-ad-countdown" style="color: white; font-weight: 400; position: absolute; left: 50px; top: 3px; line-height: normal"></div>\t\t\t<div class="skip-ad-container" style="width: 50%; position: absolute; right: 0px; top: 0px;">\t\t\t\t<div id="<%= playerID %>-skip-countdown" style="color: white; font-weight: 400; position: absolute; top: 4px; right: 5px; line-height: normal"></div>\t\t\t\t<a id="<%= playerID %>-skip-ad" style="display: none; color: white; font-weight: 400; position: absolute; top: 3px; right: 5px; cursor: pointer; line-height: normal">Skip</a>\t\t\t</div>\t\t</div>\t'),
K={width:"50%",height:"20px",position:"absolute",right:"0px",top:"0px",pointerEvents:"auto",fontFamily:"Helvetica",zIndex:2},B={color:"white",fontSize:"12px",fontWeight:"bold",position:"absolute",top:"4px",right:"5px"},M={display:"none",color:"white",fontSize:"14px",fontWeight:"bold",position:"absolute",top:"3px",right:"5px",cursor:"pointer"},H={width:"100%",height:"22px",position:"absolute",right:"0px",top:"0px",pointerEvents:"auto",fontFamily:"Helvetica",backgroundColor:"rgba(0,0,0, 0.7)",zIndex:2},
q={color:"white",fontSize:"16px",fontWeight:400,position:"absolute",top:"4px",right:"5px"},ea={display:"none",color:"white",fontSize:"16px",fontWeight:400,position:"absolute",top:"3px",right:"5px",cursor:"pointer"},V=createTemplate('\t\t<div\t\t\tclass="ptv-ad-bar-googima"\t\t\tid="<%= playerID %>-ad-bar"\t\t>\t\t\t<img id="<%= playerID %>-play-control" style="position: absolute; left: 0px; top: 0px; width: auto; height: auto;">\t\t\t<img id="<%= playerID %>-mute-control" style="position: absolute; left: 25px; top: 1px; width: auto; height: auto;">\t\t\t<div id="<%= playerID %>-ad-countdown" style="color: white; font-weight: 400; position: absolute; left: 50px; top: 3px; line-height: normal"></div>\t\t\t<div class="skip-ad-container" style="width: 100%; position: absolute; right: 0px; top: 0px;">\t\t\t\t<div id="<%= playerID %>-skip-countdown" style="color: white; font-size: 12px; font-weight: bold; position: absolute; top: 4px; right: 5px;"></div>\t\t\t\t<a id="<%= playerID %>-skip-ad" style="display: none; color: white; font-size: 14px; font-weight: bold; position: absolute; top: 3px; right: 5px; cursor: pointer;">Skip</a>\t\t\t</div>\t\t</div>\t'),
W=createTemplate("<% if (!adClicked || !isVPaid) { %>This ad will close in <%= Math.ceil(time.duration - time.position) %> seconds<% } %>"),X=createTemplate("You can skip this ad in <%= Math.ceil(adSkipTime - time.position) %> seconds");createTemplate('\t\t<div class="black-bar" style="position: absolute; left:   0px; width: 12.75%; height: 100%; pointer-events: auto; background-color: #000;"></div>\t\t<div class="black-bar" style="position: absolute; right: -1px; width: 12.75%; height: 100%; pointer-events: auto; background-color: #000;"></div>\t');
var fa=createTemplate('\t\t<div style="padding: 0px 0px 20px 20px">\t\t\t<% if (companionAd.type === "static") { %>\t\t\t\t<a href="<%= companionAd.click %>" target="_blank"><img src="<%= companionAd.resource %>"></a>\t\t\t<% } else if (companionAd.type === "html") { %>\t\t\t\t<%= companionAd.resource %>\t\t\t<% } else if (companionAd.type === "iframe") { %>\t\t\t\t<iframe src="<%= companionAd.resource %>" width="<%= companionAd.width %>" height="<%= companionAd.height %>" allowtransparency="true" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no"/>\t\t\t<% } %>\t\t</div>\t'),
ga=function(){p&&p.slideUp(function(){p.empty()})},ha=function(){Y();z.play()},ia=function(){l.paused=!0;J()&&(L()?R():(g.css("pointer-events","auto"),g.click(ha)));S()},T=function(){l.paused=!1;S()},N=function(){return l.paused},P=function(){z&&z.setMute()},R=function(){I=!0;setTimeout(function(){N()||Q()},1E3)},U=function(){return z?z.getMute():!0},ja=/vpaid/i,ka=/flash/i,la=TWP.PostTV.jwPlayerConfig.adSenseRegEx||/AdSense|AdX|VPAIDIMA3|DBM|DCM/i,ma=/IntegralAds/i,L=function(){return ja.test(D)||
ka.test(D)&&ma.test(F)},O=function(){return"googima"===d.adType},J=function(){return"vast"===d.adType},Y=function(){g.off("click");g.css("pointer-events","none")},S=function(){C.attr("src",N()?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAVCAIAAADNQonCAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAASdAAAEnQB3mYfeAAAAJ9JREFUOE+t1G0RgCAMAFAaEIEoRCEKUYhCFCIQQXe3O9QJG5vyz3M89oE698s6rOs6HQRDKo9d4yGlFGPc5OZEzhle1FpDCCLEEdgZ4Lz3DCQTENF7h9JWyhaB6UBd0wYpCIRKKaQuNYF1QYNGXRaCDEtNtNZIRxQEyV9dyLuLCmI1yy2Cv1EyId5rgRA/rXvAfCKfCMN/C/qtOpILPgG3iNE9V6J34wAAAABJRU5ErkJggg==":
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAVCAIAAADNQonCAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAAF1JREFUOE9jYKAK+E8uQNgONIEMp6DognPs7e3rkYC8vDzQaCCJLAhUA7EPuxFApch+gqgGksiCQDWjRkADZDQsECljpIQFFbIZSVkee06lyAgyyq39+/eTZCU+xQDTtEcPk8Cw2gAAAABJRU5ErkJggg==")},na=function(){m.attr("src",U()?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAUCAIAAADtKeFkAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAASdAAAEnQB3mYfeAAAAOhJREFUOE+lk1ERhCAQQCWBEYhABCMYgQhGMAIRjGIEIxjBCNy72RvOw0XU48NBZx/7dhdN0zQxRp4PljHmTT3jvxS7dV27rqsqOOf6vpewH54XVgihbdvSKeM4EsNT4UmOQkmEtMuySA6d50gyk/8oMgyDfKzwYnUUmabpKu+9hz+KoLBtWz2/dEi6mIlYa+d5PqsfeeFTF1URXJT+y6fE71VLoyHmM+m0y3iEicBcHY3Ck4oj0qKd8PRf7YjCl24eNXN/stHc4KUKykkiMou8/ur/g8hZ/6v8PuBJ/iK/v+EX9zLdf9cL1wScCm37SQgAAAAASUVORK5CYII=":
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAlwSFlzAAASdAAAEnQB3mYfeAAAAJVJREFUOE/tk1ENwCAMREEJEpCABCQgAQlIQQoSkIIEdkkXtizA6PjdfTT8vHLptbLWKj5JSim+wSe1DmutrbXkkgeHEACg8mB8mHMGOYONMWjc5JzDJ957wl5gMtaUUgKM+sODqLYG1o0qxrg07dF1IOpSykvOk9NSSlHg7PVsTWEB4u121xHvqh4tLvg+z8U3bf6WDjULsaN9YNkfAAAAAElFTkSuQmCC")},Q=function(){u.text("");n.hide();TWP.PostTV.isDeskweb&&w.show()},Z=function(){if(N())I&&
Q();else{var a=_.now();J()&&L()&&1E3<a-l.lastUpdate&&(l.shadowTiming=!0,l.position+=(a-l.lastUpdate)/1E3,l.lastUpdate=a,l.duration&&l.position>=l.duration&&(R(),Q()));l.position>c&&(l.duration&&u.text(W({time:l,adSkipTime:f,adSkipThreshold:e,adClicked:I,isVPaid:L()})),TWP.PostTV.isDeskweb&&!la.test(F)&&(!l.duration||Math.floor(l.duration)>f+e)&&(J()&&(u.hide(),x.css("width","100%")),Math.ceil(l.position)>f?(n.hide(),w.show()):n.text(X({time:l,adSkipTime:f,adSkipThreshold:e}))))}},ba={setPlayer:function(a){a.player?
a.$playerContainer?(z=a.player,g=a.$innerWrapper||g,h=a.$adBarContainer||h):console.log("AdManager - Error: no $playerContainer object"):console.log("AdManager - Error: no player object")},adStart:function(b){if(y)this.setPlaying();else{var c=_.now();y=!0;I=!1;f=d.adSkipTime||15;D=b&&b.creativetype?b.creativetype:"";F=b&&b.adsystem?b.adsystem:"";l={paused:!1,position:0,duration:0,lastUpdate:c,shadowTiming:!1};O()&&(L()?(u.show(),a.css(H),n.css(q),w.css(ea)):(u.hide(),a.css(K),n.css(B),w.css(M)));
J()&&L()||O()&&!L()?(C.hide(),TWP.PostTV.isDeskweb&&J()?(m.show(),m.css("left","0px")):m.hide(),u.css("left","25px")):(C.show(),TWP.PostTV.isDeskweb&&J()?(m.show(),m.css("left","25px"),u.css("left","50px")):(m.hide(),u.css("left","25px")));S();na();u.text("");w.hide();TWP.PostTV.isDeskweb?n.text("").show():n.text("").hide();a&&(r(),h.prepend(a));Z();E=setInterval(Z,100)}},adComplete:function(){y&&(y=!1,Y(),b(),clearInterval(E),E=null,a&&0<a.length&&a.detach(),ga())},updateAdTime:function(a){_.extend(l,
a,{lastUpdate:_.now()});l.duration>30+e&&(f=30);a.position&&l.shadowTiming&&(N()?T():ia())},showCompanionAd:function(a){p&&a.companions.length&&(a=a.companions[0],p.hide().html(fa({companionAd:a})).slideDown())},removeCompanionAd:ga,setPaused:ia,setPlaying:T,getAdPaused:N,getAdPlaying:function(){return!N()},mute:P,isMuted:U,setMute:na,adClick:R,getAdRunning:function(){return y}};if(function(d){f=d.adSkipTime||15;e=d.adSkipThreshold||3;c=d.displayThreshold||.25;v=d.playerID;p=d.$companionAdContainerID||
$("#"+d.companionAdContainerID);G=d.skipAd;t=d.onError;b=d.showControls;r=d.hideControls;d="";G||(d="AdManager: No ad skip callback specified");v||(d="AdManager: No player ID specified");if(d)return t&&t(d),console.log(d),!1;a=O()?$(V({playerID:v})):$(k({display:{playPauseControl:J()&&L()||O()&&!L()?!1:!0,muteControl:TWP.PostTV.isDeskweb&&J()},playerID:v}));C=a.find("#"+v+"-play-control");m=a.find("#"+v+"-mute-control");u=a.find("#"+v+"-ad-countdown");n=a.find("#"+v+"-skip-countdown");w=a.find("#"+
v+"-skip-ad");x=a.find(".skip-ad-container");C.click(ha);m.click(P);w.click(G);return!0}(d))return ba};var t=function(d,f,e){e=e||{};var c,p,h={},g={},a=!0,C=["onSetupError","onError","onAdError"],m=!1,u=!0,n=!0,w,x,y=!0,t=!1,l=!1,E=!1,D=!1,F=!1,z=!1,v=!1,da=0,G,b,r,k=[],K=!1,B={},M,H,q,ea,V=!1,W=!1,X=-1<TWP.PostTV.BrowserInfo.OS.toLowerCase().indexOf("android"),fa=X;try{fa=X&&43>parseInt(TWP.PostTV.BrowserInfo.version)}catch(ua){console.debug(ua)}var ga=function(){var a=/-(\w)?/g;return function(b){return b.replace(a,
function(a,b){return b?b.toUpperCase():""})}}(),ha=function(a,b){for(var c=1,d=ga(b),k=d+c;window[k];)c++,k=d+c;window[k]=a;console.log("jw:",k)},ia=createTemplate('\t\t<div class="inner-wrapper <%= config.className ? config.className : "" %>"\t\t\tstyle="position:absolute;\t\t\t\ttop:0;\t\t\t\tleft:0;\t\t\t\tpointer-events: none;\t\t\t\theight: <%= config.height ? config.height : "100%" %>;\t\t\t\twidth: <%= config.width ? config.width : "100%" %>;">\t\t\t<%= config.html ? config.html : "" %>\t\t</div>\t'),
T={onTime:_.noop,onAdTime:_.noop,onBufferChange:_.noop,onFirstFrame:function(a,b){console.debug("firstFrame:",{timing:(h.firstFrame-h.load)/1E3})},onReady:function(a,b){console.debug("onReady:",{renderingMode:g.getProvider(),timing:(h.now-h.created)/1E3})},onRecreated:function(a,b){console.debug("onRecreated:",{renderingMode:g.getProvider(),timing:(h.now-h.created)/1E3})},onSetupError:function(a,b){console.debug("onSetupError:",{fallback:b[0],message:b[1]})},onMeta:function(a){},defaultLogger:function(a,
b){console.debug(a,b.length?b:{})}},N=function(a){g&&u&&(!a||1<a.position)&&g.setControls(!0)},P=function(){g&&g.setControls(!1)},R=function(){fa&&"posttv-embed"===d.ptvType&&w.attr("data-disable-fullscreen",1)},U=function(){g&&!Y()&&g.play()},ja=function(){!g||S()||g&&"idle"==g.getState()||g.pause()},ka=function(a){var b=Z();l&&(E=!0,A.onAdSkip(),aa(),a!==r&&(E=!1,A.onVideoEnd()));if(D)A.onVideoEnd();r=a||r;b?(pa(),qa(ra)):g.load(_.isArray(r)?r:[r])},la=function(){!q&&TWP.PostTV.isDeskweb&&(q=setTimeout(va,
ea))},ma=function(a){g&&(a=a||c(),B=B||{},B.adTag=a,B.adType=ca(),"googima"===ca()?setTimeout(function(){g.playAd(a);la()},0):(g.playAd(a),la()))},L=function(){g&&g.pauseAd()},O=function(){E=!0;A.onAdSkip();aa();ka(r)},J=function(){return g?g.id:""},Y=function(){return g&&"playing"==g.getState()?!0:!1},S=function(){return g&&"paused"==g.getState()?!0:!1},na=/flash/i,Q=function(){var a=g?g.getProvider():{};return a&&a.name?na.test(a.name)?"flash":a.name:""},Z=function(){return"flash"===Q()},ba=function(){return"html5"===
Q()},A={},aa=function(){A.onAdEnd(B)},va=function(){A.onAdTimeout(B)},sa=function(a){if(y){var b=_.noop;h.firstOverallFrame=h.firstFrame?!1:!0;y=!1;h.firstFrame=h.now;l?h.firstAdFrame||(h.firstAdFrame=h.firstFrame,b=A.onFirstAdFrame):h.firstVideoFrame||(h.firstVideoFrame=h.firstFrame,b=A.onFirstVideoFrame);a=_.chain({time:a,delta:(h.firstFrame-h.load)/1E3}).extend(_.pick(h,["load","firstFrame","firstOverallFrame","firstAdFrame","firstVideoFrame"])).pick(_.identity).value();A.onFirstFrame(a);b(a)}},
ta={onDestroyPlayer:function(){},onBufferingComplete:function(a){l||setTimeout(N,1)},onFirstFrame:function(){},onInitialAdPlay:function(){},onFirstAdFrame:function(a){_.extend(B,_.pick(a.time,"duration"));q&&(clearTimeout(q),q=null)},onAdTimeout:function(){B.timeout=(h.now-h.load)/1E3;O()},onAdSkip:function(){},onAdEnd:function(a){q&&(clearTimeout(q),q=null);t=y=!0;l=!1;ba()&&(h.load=h.now);H.adComplete();W&&(U(),W=!1);n&&P()},onInitialVideoPlay:function(){},onFirstVideoFrame:function(){E=!1},onVideoEnd:function(){y=
!0;da++;B={};V=D=t=!1;h.firstFrame=null;h.firstAdFrame=null;h.firstVideoFrame=null;n&&P()}},wa={onReady:function(){h.ready=h.now;w=$("#"+J());x=$(ia({config:{height:"100%",width:"100%"}}));w.append(x);R();H.setPlayer({player:g,$adBarContainer:w.parent(),$playerContainer:w,$innerWrapper:x})},onRecreated:function(){v=!1;h.ready=h.now;w=$("#"+J());w.append(x);R();H.setPlayer({player:g,$playerContainer:w})},onSetupError:function(a,b){}},xa={onPlaylist:function(a){k=a.playlist||[];ba()&&TWP.PostTV.isDeskweb&&
(m||E)&&setTimeout(U,0)},onPlaylistItem:function(a){a=k[a.index]||{};K=a.file&&-1<a.file.indexOf("youtube");if(D)A.onVideoEnd()},onPlaylistComplete:function(){}},ya={onBufferChange:function(a){}},za={onPlay:function(a){D||(D=!0,H.adComplete(),A.onInitialVideoPlay())},onPause:function(a){},onBuffer:function(a){F=!0},onIdle:function(a){},onComplete:function(){A.onVideoEnd()},onError:function(a){A.onVideoEnd()}},Aa={onSeek:function(a){z=!0},onTime:function(a){X&&l&&(ja(),W=!0);sa(a);if(F)A.onBufferingComplete(a);
z=F=!1}},Ba={onMute:function(a){H.setMute()},onVolume:function(a){H.setMute()}},Ca={onFullscreen:function(a){},onResize:function(a){}},Da={onQualityLevels:function(a){},onQualityChange:function(){}},Ea={onCaptionsList:function(a){},onCaptionsChange:function(a){}},Fa={onDisplayClick:function(){}},Ga={onAdClick:function(a){H.adClick()},onAdCompanions:function(a){H.showCompanionAd(a);_.extend(B,a)},onAdComplete:function(a){aa()},onAdSkipped:function(){aa()},onAdError:function(a){_.extend(B,a);aa()},
onAdImpression:function(a){_.extend(B,a)},onAdMeta:function(a){_.extend(B,a)},onAdTime:function(a){if(!E){l=!0;sa(a);if(F)A.onBufferingComplete(a);z=F=!1;H.updateAdTime(a)}},onBeforePlay:function(){h.load=h.now;z=!0;var a=!V&&!D&&p();V=!0;a&&(E=!1,ma())},onBeforeComplete:function(){},onAdPause:function(a){H.setPaused(a)},onAdPlay:function(a){l||(A.onInitialAdPlay(),y=!0);H.adStart(B);l=!0;D=!1}},Ha={onMeta:function(a){}},ca=function(){return M.adType?M.adType:""},Ia=function(){var a=JSON.parse(JSON.stringify(d));
_.extend(a,{displaytitle:!1,displaydescription:!1,title:r.title},{image:r.image},function(){var a={googima:function(a){return{advertising:{client:"googima",vpaidmode:"enabled"}}},vast:function(){return{advertising:{client:"vast"}}}};return a[ca()]?a[ca()]():{}}(),function(a,b){a=a||r;return{playlist:_.isArray(a)?a:[a],primary:b||d.playerType,androidhls:!0}}(),function(){var a=m||E;return{autostart:TWP.PostTV.isDeskweb?a:!1}}(),{width:"100%",aspectratio:"posttv-player"===d.ptvType&&TWP.isLeafPage?
"16:9":d.aspectRatio},function(){var a={},b=G+"/static/js/posttv/jwPlayer/panframe.jw7.2.x.loader.js";e.contentConfig.video360&&(a[b]={html:!0},$(".posttv-video-container").on("DOMNodeInserted",function(a){$(a.target).has(".jw-video")&&$(a.target).find(".jw-video").attr("crossOrigin","anonymous")}),$(".posttv-video-container").on("DOMNodeInserted",function(a){$(a.target).is("canvas")&&$(".jw-aspect",".posttv-video-container").css("display","inline")}));"posttv-player"===d.ptvType&&TWP.isLeafPage&&
(b=window.wp_pb&&"development"===wp_pb.environment?G+"/static/js/posttv/jwPlayer/jwPlayerSharing.js":G+"/static/js/posttv/jwPlayer/jwPlayerSharing.min.js",d.showSharingOverlay&&(a[b]={videoJson:e,playerContainerId:d.playerContainerID,hideButtons:d.hideOverlayButtons}));return{plugins:a}}(),{flashplayer:"www.washingtonpost.com"===window.location.host&&"https:"===window.location.protocol?G.replace("js.washingtonpost.com","www.washingtonpost.com")+"/static/js/posttv/vendor/jw/jwplayer.flash.swf":G+"/static/js/posttv/vendor/jw/jwplayer.flash.swf",
base:G+"/static/js/posttv/vendor/jw/"},{skin:{name:queryStringObj.skin?queryStringObj.skin:"bekle"}},{abouttext:"PostTV - Washington Post",aboutlink:G+"/c/video/topic/topnews"},function(){if(!isNaN(parseInt(d.customVolume)))return{cookies:!1}}());return a},oa=function(c,d,k){c.externals[k]="function"===typeof c.externals[k]?c.externals[k]:_.noop;return function(){h.now=_.now();var r=arguments;(a||-1<_.indexOf(C,k))&&(T[k]?T[k]:T.defaultLogger)(k,r);"onError"===k&&c.externals[k].apply(b,arguments);
d.apply(c,arguments);"onError"!==k&&c.externals[k].apply(b,arguments)}},pa=function(){g&&(A.onDestroyPlayer(),x.detach(),g.stop(),w.off(),g.remove(),g=null,v=!0)},qa=function(b){var c=Ia();a&&console.debug(JSON.parse(JSON.stringify(c)));h.created=_.now();g=jwplayer(d.playerContainerID).setup(c);e.contentConfig.video360&&(window.jw=g);if(!_.isEmpty(g))return a&&!v&&ha(b,d.playerContainerID),c=_.extend({},ta,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha),_.each(c,_.bind(function(a,c){if("function"===typeof a)if(ta[c])A[c]=
oa(b,a,c);else if(g[c]){if(!v||"onReady"!==c)g[c](oa(b,a,c))}else if(v&&"onRecreated"===c)g.onReady(oa(b,a,c))},b)),b},ra={setVideoJSON:function(a){e=a},play:U,forcePlay:function(){g&&(l?g.pauseAd():(g.pause(),g.play()))},pause:ja,stop:function(){g&&g.stop()},seek:function(a){g&&g.seek(a)},load:ka,loadAd:ma,pauseAd:L,playAd:function(){L()},skipAd:O,getState:function(){return g?g.getState():null},getVideosPlayed:function(){return da},isPaused:S,isPlaying:Y,getPosition:function(){return g?g.getPosition():
null},getElementID:J,resize:function(a,b){g&&g.resize(a,b)},isFullscreen:function(){return g?g.getFullscreen():!1},getProvider:Q,isFlash:Z,isHTML5:ba,isYouTube:function(){return K},hasPlayedAd:function(){return t},isPlayingAd:function(){return l},isPlayingVideo:function(){return D},isBuffering:function(){return F},isBufferingExpected:function(){return z},getSkin:function(){return""},getAdMeta:function(){return B},get$playerContainer:function(){return w},get$innerWrapper:function(){return x},getVolume:function(){return g?
g.getVolume():null},setVolume:function(a){g&&g.setVolume(0<a&&1>a?100*a:100<a?100:0>a?0:a)},hideControls:P,showControls:N,hidePlayer:function(a){(!a||a.oldstate&&"PLAYING"!==a.oldstate.toUpperCase())&&w.css("opacity",0)},showPlayer:function(){w.css("opacity",1)},setAutoplay:function(a){void 0!==a&&(m=a?!0:!1)},getAutoplay:function(){return m},destroyPlayer:pa};return function(k){a=_.has(d,"debug")?d.debug:a;k.externals=f||{};r=d.videoData||{};b=d.context||k;G=d.contextPath||"//www.washingtonpost.com/posttv";
M=d.adConfig||{};m=d.autoplay||!1;c=M.getAdTag||_.noop;p=M.shouldPlayAd||_.noop;ea=M.adLoadWaitTime||3E3;delete d.context;u=_.has(d,"allowControls")?d.allowControls:u;n=_.has(d,"hideBuffering")?d.hideBuffering:n;d.controls=u&&!n;H=TWP.PostTV.AdManager({adType:ca(),adSkipTime:M.adSkipTime||15,adSkipThreshold:M.adSkipThreshold||3,playerID:d.playerContainerID,companionAdContainerID:d.companionAdContainerID,skipAd:O,showControls:N,hideControls:P});return qa(k)}(ra)};TWP.PostTV.PlayerJW=function(d,f,e){return function(c){var p=
1E3*(TWP.PostTV.jwPlayerConfig.adLoadWaitTime||3),h=TWP.PostTV.jwPlayerConfig.editorialPlaybackWaitTime||5,g=TWP.PostTV.jwPlayerConfig.captionsConfidenceMinimum||.75,a=this,C=!1,m=null,u=null,n=c.adSkipTime||15,w=c.adSkipThreshold||3;a.debug=TWP.PostTV.debug;a.debugTracking=window.queryStringObj&&"true"==queryStringObj.ptvdebugtracking?!0:!1;a.debugInfo={};var x=window.wp_pb&&wp_pb.contextPath?wp_pb.contextPath:window.location.protocol+"//www.washingtonpost.com/video",y=d('script[src*="jwPlayerWrapper.js"], script[src*="jwPlayerWrapper.min.js"]').attr("src");
if(y){var I=-1<y.indexOf("/static/js/posttv")?y.indexOf("/static/js/posttv"):y.indexOf("/resources/js/posttv");-1<I&&(x=y.substr(0,I),0===x.indexOf("//")&&(x=window.location.protocol+x))}a.debug&&console.debug("contextPath:",x);var l=function(a){var c=document.createElement("div");c.innerHTML=a;return d(c).text()},E=createTemplate('\t\t\t<div class="ptv-video-headline-container">\t\t\t\t<span class="ptv-video-headline"><%= headline.title ? headline.title : "" %></span>\t\t\t\t<span class="wpv-video-sharing <%= hideOverlayButtons ? "hide" : "" %>">\t\t\t\t\t<span class="wpv-tooltip-button wpv-video-embed">\t\t\t\t\t\t<span class="title">Embed</span>\t\t\t\t\t\t<i class="fa fa-code icon-code"></i>\t\t\t\t\t\t<span class="wpv-tooltip">\t\t\t\t\t\t\t<span class="wpv-sharing-copy">\t\t\t\t\t\t\t\t<span class="wpv-sharing-copy-input-wrap"><input type="text" class="wpv-sharing-copy-input" value="<%= embedCode %>"></input></span>\t\t\t\t\t\t\t\t<span class="wpv-sharing-copy-button">Copy</span>\t\t\t\t\t\t\t</span>\t\t\t\t\t\t</span>\t\t\t\t\t</span>\t\t\t\t\t<span class="wpv-tooltip-button wpv-video-social">\t\t\t\t\t\t<span class="title">Share</span>\t\t\t\t\t\t<i class="fa fa-share icon-share-alt"></i>\t\t\t\t\t\t<span class="wpv-tooltip">\t\t\t\t\t\t\t<i class="wpv-sharing-button fa fa-facebook icon-facebook"></i>\t\t\t\t\t\t\t<i class="wpv-sharing-button fa fa-twitter icon-twitter"></i>\t\t\t\t\t\t\t<i class="wpv-sharing-button fa fa-google-plus icon-google-plus"></i>\t\t\t\t\t\t\t<% if (TWP.PostTV.isDeskweb) { %>\t\t\t\t\t\t\t\t<i class="wpv-sharing-button fa fa-envelope icon-envelope"></i>\t\t\t\t\t\t\t<% } else { %>\t\t\t\t\t\t\t\t<a class="wpv-sharing-button-email" href="#">\t\t\t\t\t\t\t\t\t<i class="fa fa-envelope icon-envelope"></i>\t\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t<% } %>\t\t\t\t\t\t</span>\t\t\t\t\t</span>\t\t\t\t</span>\t\t\t</div>\t\t'),
D=createTemplate("mailto:?subject=<%= encodeURIComponent(shareTitle) %>&body=<%= encodeURIComponent(shareBlurb) %>%20-%20<%= encodeURIComponent(shareURL) %>"),F=createTemplate("<iframe width='<%= width %>' height='<%= height %>' scrolling='no' src='<%= hostname %><%= contextPath %><%= isLive ? '/c/embed-live/' : '/c/embed/' %><%= videoID %>' frameborder='0' webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>"),z=createTemplate('\t\t\t<div class="ptv-msg-box <%= config.className ? config.className : "" %>" style="position: absolute; top: 0; right: 0; <%= config.style ? config.style : "" %>">\t\t\t\t<%= config.html ? config.html : "" %>\t\t\t</div>\t\t'),
v=createTemplate('\t\t\t<div class="debug-overlay" style="width: 50%; height: 100%; pointer-events: auto; background-color: #000; opacity: 0.7; padding: 5px">\t\t\t</div>\t\t'),da=createTemplate('\t\t\t<div class="debug-content" style="color: #CCC; text-shadow: 0px 0px 3px rgba(0, 0, 0, 0.75);">\t\t\t<% _.each(debug, function(value, key) { %>\t\t\t\t<p><%= key %>: <%= value %></p>\t\t\t<% }); %>\t\t\t</div>\t\t'),G=createTemplate('//pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=%2F701%2F<%= adConfig.adSetConfig && adConfig.adSetConfig.adSetZone ? adConfig.adSetConfig.adSetZone : DEFAULT_ADZONE %><%= adSetSuffix ? adSetSuffix : "" %>&ciu_szs=300x250&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=<%= encodeURI(window.location.href) %>&correlator=<%= _.now() %>&scp=&cust_params=<%= isTrending ? encodeURIComponent("tv=y&") : "" %><%= jw_pt ? encodeURIComponent("jw_pt=" + jw_pt + "&") : "" %><%= shape ? encodeURIComponent("shape=" + shape + "&") : "" %><%= excl_cat ? encodeURIComponent("excl_cat=" + excl_cat + "&") : "" %><%= adTagSuffix ? encodeURIComponent(adTagSuffix) : encodeURIComponent("vid=15,30") %>');
a.isTrending=function(b,c){b=b||a.json;c=c||a.trendingJson;var d=f.has(queryStringObj,"trendingEnabled")?!!parseInt(queryStringObj.trendingEnabled):!0,K=b.contentConfig.uuid;if(d&&c&&c.topVideos&&c.topVideos.length)for(d=0;d<c.topVideos.length;d++)if(c.topVideos[d].videoId===K)return!0;return!1};a.getAdTag=function(b){b=b||a.json;b={adConfig:queryStringObj.adSetZone?{adSetConfig:{adSetZone:queryStringObj.adSetZone}}:c.adSetZone&&0<c.adSetZone.length?{adSetConfig:{adSetZone:c.adSetZone}}:b.adConfig,
adTagSuffix:queryStringObj.adTagSuffix?queryStringObj.adTagSuffix:c.adTagSuffix,adSetSuffix:/^fbInstant$/.test(queryStringObj.embedContext)?"_fb":/^amp$/.test(queryStringObj.embedContext)?"_amp":TWP.PostTV.isMobile?"_mweb":TWP.PostTV.isTablet?"_tablet":"",client:queryStringObj.adSetZone?{}:{isMobile:TWP.PostTV.isMobile,isTablet:TWP.PostTV.isTablet},isTrending:a.isTrending(),jw_pt:function(){var b=TWP.PostTV.isFlashEnabled&&"html5"!==c.args.type?"flash":"html5";return b=a.isEmbed()?b+"_embed":a.isLeafPage()?
b+"_leaf":b+"_other"}(),shape:b.contentConfig.vertical?"v":e,excl_cat:function(b){var c,d=[];try{b.contentConfig.title&&d.unshift(b.contentConfig.title),b.contentConfig.blurb&&d.unshift(b.contentConfig.blurb),b.metaConfig.tags&&d.unshift(b.metaConfig.tags),window.vidExclusions&&0<d.length&&(c=window.vidExclusions(d))}catch(r){a.debug&&console.log("Unable to find exclusion categories",r)}return c&&0<c.length?c.join(","):e}(b),DEFAULT_ADZONE:"wpni.video.oodef"};var d=queryStringObj.adTag?queryStringObj.adTag:
G(b);(a.debug||queryStringObj.adSetZone||queryStringObj.adTag||queryStringObj.adTagSuffix)&&console.debug({config:b,adTag:d});return d};a.recommendedVideos=TWP.PostTV.RecommendedVideos();a.create=function(){var b=function(b){var d=TWP.PostTV.jwPlayerConfig,r={debug:a.debug,context:a,contextPath:x,playerContainerID:a.playerElementId,companionAdContainerID:"companion-ad-container",hideBuffering:!0,autoplay:a.autoplay,aspectRatio:c.aspectRatio,allowControls:c.allowControls,showEndscreen:a.showEndscreen,
autoplayPlaylist:a.mobilePlaylist,showSharingOverlay:a.showSharingOverlay,hideOverlayButtons:a.hideOverlayButtons,ptvType:a.playerType,playerType:c.args.type&&"html5"===c.args.type?"html5":"flash",adConfig:{adType:queryStringObj.adType?queryStringObj.adType:d.adType?TWP.PostTV.isDeskweb?c.args.type&&"html5"===c.args.type?d.adType.desktop.html5:d.adType.desktop.flash:TWP.PostTV.isTablet?d.adType.tablet:d.adType.mobile:TWP.PostTV.isDeskweb?"googima":"vast",adLoadWaitTime:p,adSkipTime:n,adSkipThreshold:w,
shouldPlayAd:a.shouldPlayAd,getAdTag:a.getAdTag},customVolume:c.customVolume};a.debug&&console.log("ad client:",r.adConfig.adType);a.mobilePlaylist?a.jwSetupAutoplayPlaylist(a.json,function(a){r.videoData=a;b(r)}):(r.videoData=a.jwSetupVideoData(a.json),b(r))},d=function(b){a.playerLoadTime=f.now();a.player=t(b,a.jwCallbacks,a.json);PubSub.publish(TWP.PostTV.EVENTS.OO_PLAYER_INITIALIZED,c)};"undefined"!==typeof window.jwplayer?b(d):(console.debug("jwplayer is undefined!"),a.sendTrackingData("PostTV Player JW Error",
["event9997"],{errorCode:"ptv_jwUndefined",errorText:"JW is undefined."},{splunk:!0,omniture:!0,nielsen:!0}))};a.jwSetupTitle=function(b){b=b||a.json;return{title:b.contentConfig&&b.contentConfig.title?b.contentConfig.boldTitle?b.contentConfig.boldTitle+": "+b.contentConfig.title:b.contentConfig.title:""}};a.jwSetupMediaID=function(b){b=b||a.json;return{mediaID:b.contentConfig&&b.contentConfig.uuid?b.contentConfig.uuid:""}};a.imageResizeService=function(a,d,k){d=d?d:"";k=(k=c.json.contentConfig.vertical?
"":k?k:d?.5625*d:"")?"&h="+Math.ceil(k):"";return"//img.washingtonpost.com/wp-apps/imrs.php?src="+(a?a:"http://www.washingtonpost.com/posttv/static/img/posttv/posttv_error_black.jpg")+(d?"&w="+d:"")+k};a.jwSetupImage=function(b){try{var c=a.isLeafPage()?640:window.frameElement&&d(window.frameElement).attr("data-promo-width")?d(window.frameElement).attr("data-promo-width"):a.$playerContainer.width();b.promoImage.image=b.promoImage.image||{};b.promoImage.image.resized=b.promoImage.image.resized?b.promoImage.image.resized:
b.promoImage.image.url?a.imageResizeService(b.promoImage.image.url,c):""}catch(k){console.log("error resizing endscreen image")}return{image:b.promoImage&&b.promoImage.image.resized}};a.jwSetupClosedCaptions=function(b){var c={},d=b.subtitlesConfig||{};if(TWP.PostTV.isMobile||TWP.PostTV.isTablet)return c;d.confidence&&d.confidence>=g&&d.subtitlesUrls&&0<d.subtitlesUrls.length&&(d=f.filter(d.subtitlesUrls,function(a){return-1<f.indexOf(["DFXP","SRT","WEB_VTT"],a.format)}),0<d.length&&(c.tracks=[{file:d[0].url,
label:"English",kind:"captions","default":!1}]));a.debug&&(console.debug("CC data:",b.subtitlesConfig),console.debug("CC config:",c));return c};a.bestAvailableStream=function(a,c,d,K){var e=TWP.PostTV.jwPlayerConfig||{},g=TWP.PostTV.isMobile?"mobile":TWP.PostTV.isTablet?"tablet":"desktop";e&&e.maxBitrates&&e.maxBitrates[g]&&!queryStringObj.maxBitrate&&(e.maxBitrates[g][K]&&e.maxBitrates[g][K][d]&&e.maxBitrates[g][K][d].maxBitrate?c=e.maxBitrates[g][K][d].maxBitrate:e.maxBitrates[g][d]&&e.maxBitrates[g][d].maxBitrate&&
(c=e.maxBitrates[g][d].maxBitrate));return a?f.chain(a).reject(function(a){return"undefined"==typeof c||0>=c?!1:a.bitrate>c?!0:!1}).map(function(a){return f.extend(a,{height:f.isNumber(a.height)?a.height:0,width:f.isNumber(a.width)?a.width:0,bitrate:f.isNumber(a.bitrate)?a.bitrate:0})}).max(function(a){return a.height+a.width+a.bitrate}).value():{}};a.fallbackStream=function(a){var c=TWP.PostTV.jwPlayerConfig||{},d=TWP.PostTV.isMobile?"mobile":TWP.PostTV.isTablet?"tablet":"desktop",e;c&&c.maxBitrates&&
c.maxBitrates[d]&&c.maxBitrates[d].fallback&&(e=c.maxBitrates[d].fallback);f.isNumber(queryStringObj.fallbackBitrate)&&(e=queryStringObj.fallbackBitrate);return e&&a?f.chain(a).reject(function(a){return a.bitrate>e?!0:!1}).map(function(a){return f.extend(a,{height:f.isNumber(a.height)?a.height:0,width:f.isNumber(a.width)?a.width:0,bitrate:f.isNumber(a.bitrate)?a.bitrate:0})}).max(function(a){return a.height+a.width+a.bitrate}).value():{}};a.jwSetupVideoData=function(b){var r=b.contentConfig.streams||
b.liveEventConfig.streams,k=!0===b.contentConfig.vertical?"portrait":"landscape",e=TWP.PostTV.jwPlayerConfig?jQuery.extend(!0,{},TWP.PostTV.jwPlayerConfig):{},g=!1;c&&c.args&&c.args.jwPlayerConfig&&(e=d.extend(!0,e,c.args.jwPlayerConfig));var n=TWP.PostTV.BrowserInfo.OS.toLowerCase(),h=TWP.PostTV.BrowserInfo.browser.toLowerCase(),q=TWP.PostTV.isMobile?"mobile":TWP.PostTV.isTablet?"tablet":"desktop",n=0<=n.indexOf("kindle")?"android":n,m=a.jwSetupTitle(b),u=a.jwSetupImage(b),l=a.jwSetupClosedCaptions(b),
F=a.jwSetupMediaID(b),z=queryStringObj.maxBitrate?f.intersection([queryStringObj.maxBitrate],"160 300 600 1200 2000 5400".split(" ")):e.maxBitrates&&e.maxBitrates[q]&&e.maxBitrates[q][n]?e.maxBitrates[q][n].maxBitrate:e.maxBitrates&&e.maxBitrates[q]?e.maxBitrates[q].maxBitrate:e.maxBitrates?e.maxBitrates.maxBitrate:null,z=z||{mobile:300,tablet:600,desktop:2E3}[q],v=queryStringObj.streamPreference?f.intersection(queryStringObj.streamPreference.split("|"),"_master.m3u8 .m3u8 .smil .mp4 .webm .m4v".split(" ")):
a.json.liveEventConfig&&a.json.liveEventConfig.streams&&e.liveStreamPreference?e.liveStreamPreference:e.streamPreferences&&e.streamPreferences[q]&&e.streamPreferences[q][c.args.type]&&e.streamPreferences[q][c.args.type][h]?e.streamPreferences[q][c.args.type][h].streamPreference:e.streamPreferences&&e.streamPreferences[q]&&e.streamPreferences[q][c.args.type]?e.streamPreferences[q][c.args.type].streamPreference:e.streamPreferences&&e.streamPreferences[q]&&e.streamPreferences[q][n]?e.streamPreferences[q][n].streamPreference:
e.streamPreferences&&e.streamPreferences[q]&&e.streamPreferences[q][h]?e.streamPreferences[q][h].streamPreference:e.streamPreferences&&e.streamPreferences[q]?e.streamPreferences[q].streamPreference:e.streamPreferences?e.streamPreferences.streamPreference:null,v=v||"_master.m3u8 .m3u8 .smil .mp4 .webm .m4v".split(" "),p=f.groupBy(r,function(a){return f.find(v,function(b){return a.url.endsWith(b)})}),r=queryStringObj.source?[{"default":!0,file:queryStringObj.source}]:f.chain(v).map(function(b){return a.bestAvailableStream(p[b],
z,b,k)}).compact().map(function(a){return f.isEmpty(a)?null:{file:a.url}}).compact().value();r.length||(a.debug&&console.debug("normal source not found, searching for fallback "),r=f.chain(v).map(function(b){return a.fallbackStream(p[b])}).compact().map(function(a){return f.isEmpty(a)?null:{file:a.url}}).compact().value(),r.length&&(a.debug&&console.debug("using fallback "),a.sendTrackingData("PostTV Player JW Fallback Stream",["event9995_01"],{errorCode:"ptv_fallbackStream",errorText:"PostTV video is using a fallback stream."},
{splunk:!0,omniture:!0,nielsen:!0})));a.debug&&!r.length&&console.debug("no source found");f.each(r,function(b){if(e.httpsToHttp||"true"===queryStringObj.httpsToHttp)b.file=b.file.replace("https://","http://");b.file&&-1<b.file.indexOf("ooyala.com")&&!g&&(a.sendTrackingData("PostTV Player JW Ooyala Stream",["event9989_03"],{errorCode:"ptv_ooStreamLoad",errorText:"ooyala stream loaded"},{splunk:!0}),g=!0)});b.youtubeConfig&&b.youtubeConfig.youtubeVideoId&&r.push({file:"//www.youtube.com/watch?v="+
b.youtubeConfig.youtubeVideoId});if(b.contentConfig.dateConfig&&b.contentConfig.dateConfig.publicationEndDate&&(new Date).getTime()>=b.contentConfig.dateConfig.publicationEndDate||"undefined"!==typeof queryStringObj.noSources)r=[];a.debug&&console.debug("sources: ",r);return f.extend({sources:r},m,u,l,F)};a.jwSetupAutoplayPlaylist=function(b,c){a.recommendedVideos.fetch(b,function(d){d.unshift(b);a.videoDataList=d;d=f.map(d,a.jwSetupVideoData);c(d)})};a.jwSetupFile=function(a){var c=a.contentConfig.streams;
a=TWP.PostTV.jwPlayerConfig;a.presets={presets:["_master.m3u8",".m3u8",".smil",".mp4",".webm"],fallback:[".webm",".mp4"]};var d=function(a){return!f.isEmpty(f.filter(c,function(b){return b.url.endsWith(a)}))},e=f.find(a.presets,d),g=f.find(a.fallback,d);a=c?f.chain(c).filter(function(a){return a.url.endsWith(e)}).max(function(a){return a.width+a.height+(f.isNumber(a.bitrate)?a.bitrate:0)}).value():{};d=g?f.chain(c).filter(function(a){return a.url.endsWith(g)}).max(function(a){return a.width+a.height+
(f.isNumber(a.bitrate)?a.bitrate:0)}).value():{};return{file:a.url,fallback:d.url}};a.setVolumeInCookie=function(a){parseInt(a);try{TWP.PostTV.setStorage("videovolume",parseInt(a))}catch(c){}};a.getVolumeFromCookie=function(){var a=parseInt(TWP.PostTV.getStorage("videovolume"));return a=isNaN(a)?0:100<a?100:0>a?0:a};a.update=function(b,c){var k=a.jwSetupVideoData(b),e=b.contentConfig&&b.contentConfig.uuid?b.contentConfig.uuid:"";if(a.isLeafPage()&&TWP.PostTV.shouldRefreshPage)-1<document.URL.indexOf("www.washingtonpost.com/posttv/")||
-1<document.URL.indexOf("www.washingtonpost.com/video/")?window.location.href=b.contentConfig.permaLinkURL:window.location.href=x+"/c/video/"+b.contentConfig.uuid;else return a.json=b,a.args=c,a.player.setVideoJSON(b),a.updateChartbeatID(e),c=f.extend(c,{videoJson:b,adSetCode:a.adSetCode,hide:a.hide,methodeUuid:e}),a.methodeUuid=e,c.isAutoPlaying&&(a.isAutoplaying=!0),a.player.load(k),PubSub.publish(TWP.PostTV.EVENTS.WILL_CHANGE_EMBED_CODE,c),c.updateURL&&a.updatePermalink(b),a.isLeafPage()&&(b.contentConfig&&
!0===b.contentConfig.disableExternalEmbed?d('[data-toggle-overlay="embed"]').addClass("hide"):d('[data-toggle-overlay="embed"]').removeClass("hide")),"function"===typeof c.callback&&c.callback.call(),a};a.isLeafPage=function(){return"posttv-player"===a.playerType&&TWP.isLeafPage};a.isEmbed=function(){return"posttv-embed"===a.playerType};a.isLiveVideo=function(){return a.json.liveEventConfig&&a.json.liveEventConfig.streams&&0<a.json.liveEventConfig.streams.length?!0:!1};a.is360Video=function(){return a.json.contentConfig&&
a.json.contentConfig.video360?!0:!1};a.getProvider=function(){return a.player.getProvider()};a.updatePermalink=function(b){try{var c=TWP.PostTV.Util.getPermaLinkURL(b,a.isEmbed());if("undefined"===typeof c)return;document.title=b.contentConfig.title;a.isEmbed()||history.pushState({data:b},b.contentConfig.title,c)}catch(d){console.error(d)}window.onpopstate=function(b){b&&b.state&&b.state.data&&a.update(b.state.data,{})}};a.onPlayNextVideo=function(b){var c=b.json,k;d.isEmptyObject(c)?b.methodeUuid?
d.ajax({type:"GET",url:k="//js.washingtonpost.com/video/findByUuid/"+b.methodeUuid,contentType:"application/json",jsonpCallback:"cb_"+b.methodeUuid.replace(/-/g,""),jsonp:"cb",data:{resType:"jsonp"},dataType:"jsonp",cache:!0,success:function(c){a.update(c[0],b)},error:function(c){"object"===typeof window.console&&console.error("Failed to fetch video data for video: "+b.methodeUuid+", e: "+c.message);a.sendTrackingData("PostTV Player Error",["event999"],{errorCode:"ptv_cannotRetrieveVideoJson",errorText:"Cannot retrieve video json data at: "+
k},{splunk:!0,omniture:!0,nielsen:!0})}}):(console.error("At least one of video json or uuid is required for updating the player to play the next video."),a.sendTrackingData("PostTV Player Data Error",["event999"],{errorCode:"ptv_unableToPlayNextVideo",errorText:"At least one of video json or uuid is required for updating the player to play the next video."},{splunk:!0,omniture:!0,nielsen:!0})):a.update(c,b);a.autoDisplayHeadline=b.autoDisplayHeadline?!0:!1;a.autoplay||(TWP.PostTV.playButtonClickedTime=
null)};a.handleTrackingData=function(b,c){c&&c.evtName&&c.evtType&&a.sendTrackingData(c.evtName,c.evtType,c,{splunk:!0,omniture:!0,nielsen:!0})};a.adsAllowed=function(b){var d=c.allowAd&&!TWP.PostTV.getPreRollsBlocked()&&!TWP.PostTV.shouldNotPlayPrerollAds&&a.player&&!a.player.isYouTube()&&b.adConfig&&b.adConfig.playVideoAds;a.debug&&!d&&(b=c.allowAd?TWP.PostTV.getPreRollsBlocked()?"TWP.PostTV.getPreRollsBlocked()":TWP.PostTV.shouldNotPlayPrerollAds?"TWP.PostTV.shouldNotPlayPrerollAds":a.player&&
a.player.isYouTube()?"youtube":b.adConfig&&!b.adConfig.playVideoAds?"json.adConfig.playVideoAds":"default":"args.allowAd",console.debug("Ads not allowed:",b));return d};a.isDueForAnAd=function(){var a="undefined"!==typeof c.adFreq?c.adFreq:TWP.PostTV.adFrequency;isNaN(parseInt(a))||isNaN(parseFloat(a))||(a=eval(a));if(isNaN(a)||0>a||1<a)a=TWP.PostTV.adFrequency;var d=0===a?Infinity:1/a;return function(){return Infinity!==d&&1>TWP.PostTV.getCount()%d}}();a.shouldPlayAd=function(b){b=b||a.json;var d=
!0,k="default";!0===a.thinkAdBlock&&a.player.isHTML5()?(d=!1,k="thinkAdBlock && isHTML5"):/^fbInstant$/.test(queryStringObj.embedContext)&&!TWP.PostTV.jwPlayerConfig.fbInstantAds?(d=!1,k="embedContext is fbInstant"):a.adsAllowed(b)?"undefined"!==typeof a.args.shouldPlayAd?(d=a.args.shouldPlayAd?!0:!1,a.args.shouldPlayAd=!1,k="self.args.shouldPlayAd"):b.adConfig&&b.adConfig.forceAd?(d=!0,k="json.adConfig.forceAd"):a.showAdsForFirstVideoOnly?(d=!a.showedAdsForFirstVideo,k="show ads for first video only"):
c.adPattern&&c.adPattern.length?(b=TWP.PostTV.getCount()%c.adPattern.length,d="1"===c.adPattern[b],k="ad pattern"):a.isTrending()?(d=!0,k="trending video"):(d=a.isDueForAnAd(),k="due for an ad"):(k="ads not allowed",d=!1);a.debug&&console.debug("shouldPlayAd:",d,"-",k);return d};a.removeHeadline=function(){a.$headline&&(clearTimeout(a.$headline.timeoutID),a.$headline.remove(),a.player.get$playerContainer().off("mouseenter"),a.player.get$playerContainer().off("mouseleave"),a.player.get$playerContainer().off("touchstart"))};
a.setupShareButton=function(b){var c="width=550, height=450, top="+(screen.height/2-225)+", left="+(screen.width/2-275);return function(){var b=a.json||{};b.contentConfig=b.contentConfig||{};var d,f,e=0<=this.className.indexOf("facebook")?"facebook":0<=this.className.indexOf("twitter")?"twitter":0<=this.className.indexOf("google")?"googleplus":0<=this.className.indexOf("envelope")?"email":"";f=b.contentConfig.shortURL||"";var g="live"===b.contentConfig.type?"Live on The Washington Post":b.contentConfig.title,
b=b.contentConfig.blurb;switch(e){case "facebook":f="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(f);break;case "twitter":f="https://twitter.com/share?url="+encodeURIComponent(f)+"&text="+encodeURIComponent(g);break;case "googleplus":f="https://plus.google.com/share?url="+encodeURIComponent(f);break;case "email":f="mailto:?subject="+encodeURIComponent(g)+"&body="+encodeURIComponent(l(b))+"%20-%20"+encodeURIComponent(f);break;default:return}d=window.open(f,"_blank",c);a.sendTrackingData("Share Button Clicked",
"event6",{eVar27:e,evtAction:e,evtGroup:"share-posttv",evtModule:"share-overlay"},{splunk:!0,omniture:!0,nielsen:!0});if("email"===e&&TWP.PostTV.isDeskweb)setTimeout(function(){d.close()},1E3);else var n=setInterval(function(){try{if(null==d||d.closed)clearInterval(n),a.play()}catch(b){}},1E3);a.pause()}}();a.setupHeadline=function(){if(a.isEmbed()){var b=a.json||{};b.contentConfig=b.contentConfig||{};a.removeHeadline();var c=F({hostname:window.wp_pb&&wp_pb.hostname?wp_pb.hostname:"//www.washingtonpost.com",
contextPath:window.wp_pb&&wp_pb.contextPath&&wp_pb.hostname?wp_pb.contextPath:"/video",videoID:"live"===b.contentConfig.type?b.id:b.contentConfig.uuid,isLive:"live"===b.contentConfig.type,height:b.contentConfig.vertical?480:290,width:b.contentConfig.vertical?290:480});a.$headline=d(E({embedCode:c,headline:a.jwSetupTitle(),hideOverlayButtons:a.hideOverlayButtons}));a.$headline.find(".wpv-sharing-copy-button").click(function(a){d(this).parent().find(".wpv-sharing-copy-input").select();document.execCommand("copy")});
a.$headline.find(".wpv-sharing-button").click(a.setupShareButton);a.$headline.find(".wpv-sharing-button-email").attr("href",D({shareURL:b.contentConfig.shortURL||"",shareTitle:"live"===b.contentConfig.type?"Live on The Washington Post":b.contentConfig.title,shareBlurb:l(b.contentConfig.blurb)}));a.player.get$innerWrapper().append(a.$headline);a.autoDisplayHeadline&&!a.player.isPlayingAd()&&(a.autoDisplayHeadline=!1,clearTimeout(a.$headline.timeoutID),a.$headline.show(),a.$headline.timeoutID=setTimeout(function(){a.$headline.fadeOut()},
4E3));a.player.get$playerContainer().mouseenter(function(){a.player.isPlayingAd()||a.player.isFullscreen()||a.$headline.show()});a.player.get$playerContainer().mouseleave(function(){a.$headline.hide()});a.player.get$playerContainer().on("touchstart",function(){a.player.isPlayingAd()||(clearTimeout(a.$headline.timeoutID),a.$headline.fadeIn(),a.$headline.timeoutID=setTimeout(function(){a.$headline.fadeOut()},4E3))})}};a.updatePlayLocalStorage=function(){if(!window.localStorage)return!1;try{var b=d.parseJSON(localStorage.getItem("twpVideoHistory"))||
{},c=f.now();b[a.methodeUuid]=b[a.methodeUuid]||{};b[a.methodeUuid].timestamp=c;d.each(b,function(a,d){(!d.timestamp||864E5<c-d.timestamp)&&delete b[a]});localStorage.setItem("twpVideoHistory",JSON.stringify(b))}catch(k){}};a.initPlaybackTimeoutChecker=function(){function b(b){a.debug&&console.debug("stopping checker due to "+(b||""));clearInterval(d)}var c=0,d;d=setInterval(function(){c++;a.player.isPlaying()||b(a.player.getState());c>h&&(b(1E3*h/1E3+" seconds passed."),0==a.playheadTime&&(a.sendTrackingData("JW Player Editorial Playback Timeout",
"event9990",{errorCode:"ptv_jwEditorialTimeout",errorText:"Player reports playheadTime of "+a.playheadTime+" after "+1E3*h/1E3+" seconds.  Player state: "+a.player.getState()},{splunk:!0,omniture:!0,nielsen:!0}),a.player.seek(5)))},1E3)};a.getEventCode=function(){var a={errorLoadingPlugin:{code:"event9991_01",text:"error loading plugin"},errorLoadingSkin:{code:"event9991_02",text:"error loading skin"},errorLoadingPluginFnf:{code:"event9991_03",text:"could not load plugin: file not found"},errorLoadingFlashPlugin:{code:"event9991_04",
text:"flash plugin failed to load"}};return function(c,d){var e=JSON.stringify(c).toLowerCase(),g=f.find(a,function(a){return 0<=e.indexOf(a.text)});return g?g.code:d}}();a.hideSocialSharing=function(){a.$socialSharing=a.$socialSharing||d("#canvas").find(".show-for-medium-up .social ul, .show-for-small-only.social ul, .social-share-link");a.$socialSharing&&a.$socialSharing.hide()};a.showSocialSharing=function(){a.$socialSharing=a.$socialSharing||d("#canvas").find(".show-for-medium-up .social ul, .show-for-small-only.social ul, .social-share-link");
a.$socialSharing&&a.$socialSharing.show()};a.showPromoScreen=function(){a.$promo=a.$promo||d(".plugins .ptv-promo");a.$promo.addClass("ptv-promo-loaded").show();a.$promo.find(".ptv-promo-video-headline-container").show();if(TWP.PostTV.isDeskweb)a.$promo.one("click",function(b){a.$promo.hide();a.play()})};a.ptvCallbacks={onDestroyPlayer:function(){a.removeChartbeatPlayer()},onBufferingComplete:function(){a.player.isBufferingExpected()||a.sendTrackingData("Player buffered",["event9993"],{},{splunk:!0})},
onFirstFrame:function(b){PubSub.publish(TWP.PostTV.EVENTS.FIRST_FRAME);a.preventHpRefresh();b.firstOverallFrame&&TWP.PostTV.incrementCount();var c=a.isEmbed()?TWP.PostTV.playButtonClickedTime:TWP.PostTV.pageLoadTime;a.debugInfo.pageLoadDelta=a.debugInfo.pageLoadDelta||(b.firstFrame-c)/1E3;a.debugInfo.playerLoadDelta=a.debugInfo.playerLoadDelta||(b.firstFrame-a.playerLoadTime)/1E3},onInitialAdPlay:function(){a.sendTrackingData("onInitialAdPlay","adPlay",{},{comscore:!0})},onFirstAdFrame:function(b){a.debugInfo.adLoadDelta=
b.delta;a.hideSocialSharing();a.removeHeadline();"player-default-tracking"===a.trackingLevel&&(b=a.player.getAdMeta(),b={creativeType:b&&b.creativetype?b.creativetype:"",videosPlayed:a.player.getVideosPlayed(),adLoadDelta:a.debugInfo.adLoadDelta,adsDuration:b&&b.duration?b.duration:e},0===a.player.getVideosPlayed()&&f.extend(b,{pageLoadDelta:a.debugInfo.pageLoadDelta,playerLoadDelta:a.debugInfo.playerLoadDelta}),a.sendTrackingData("Video Ad Start",["event7"],b,{splunk:!0,omniture:!0,nielsen:!0}));
a.debug&&(0===a.player.getVideosPlayed()&&(console.debug("Page load to first frame:",a.debugInfo.pageLoadDelta),console.debug("Player load to first frame:",a.debugInfo.playerLoadDelta)),console.debug("Ad load to first frame:",a.debugInfo.adLoadDelta))},onAdTimeout:function(b){"player-default-tracking"===a.trackingLevel&&a.sendTrackingData("Video Ad Error",["event9996_1"],{adError:JSON.stringify(b)},{splunk:!0})},onAdSkip:function(){if("player-default-tracking"==a.trackingLevel){var b=a.player.getAdMeta();
a.sendTrackingData("Skip Ad Button Clicked",["event34"],{adsDuration:b&&b.duration?b.duration:e},{splunk:!0,omniture:!0,nielsen:!0})}},onAdEnd:function(b){a.showSocialSharing();a.allowHpRefresh();"function"==typeof a.callbacks.adCompleted&&a.callbacks.adCompleted(a);PubSub.publish(TWP.PostTV.EVENTS.ADS_CLEARED,c);a.sendTrackingData("onAdEnd","stop",{},{comscore:!0})},onInitialVideoPlay:function(){a.initPlaybackTimeoutChecker()},onFirstVideoFrame:function(b){a.debugInfo.videoLoadDelta=b.delta;"player-default-tracking"===
a.trackingLevel&&(b=0===a.player.getVideosPlayed()?{videosPlayed:a.player.getVideosPlayed(),hasPlayedAd:a.player.hasPlayedAd(),videoLoadDelta:a.debugInfo.videoLoadDelta,pageLoadDelta:a.debugInfo.pageLoadDelta,playerLoadDelta:a.debugInfo.playerLoadDelta}:{videosPlayed:a.player.getVideosPlayed(),hasPlayedAd:a.player.hasPlayedAd(),videoLoadDelta:a.debugInfo.videoLoadDelta},a.trackProgress(0,b));a.setupHeadline();PubSub.publish(TWP.PostTV.EVENTS.EDITORIAL_PLAY_STARTED);a.updatePlayLocalStorage();"function"==
typeof a.callbacks.editorialPlayStarted&&a.callbacks.editorialPlayStarted(a);a.debug&&(0===a.player.getVideosPlayed()&&(console.debug("Page load to first frame:",a.debugInfo.pageLoadDelta),console.debug("Player load to first frame:",a.debugInfo.playerLoadDelta)),console.debug("Video load to first frame:",a.debugInfo.videoLoadDelta))},onVideoEnd:function(){delete a.debugInfo.bandwidths;delete a.debugInfo.bandwidthLow;delete a.debugInfo.bandwidthHigh;a.showedAdsForFirstVideo=!0;a.removeHeadline();a.allowHpRefresh();
a.switchVideo=!0;if(a.desktopPlaylist){var b=a.recommendedVideos.getNextVideo();b?(a.player.setAutoplay(!0),a.update(b,d.extend(a.args,{isPlayingInEndscreen:!0}))):a.showPromoScreen()}}};a.jwSetupCallbacks={onReady:function(){a.debugInfo.renderingMode=a.player.getProvider();a.initialTime&&a.player.seek(a.initialTime);a.playerCreated=!0;"function"===typeof a.callbacks.playerCreated&&a.callbacks.playerCreated(a);PubSub.publish(TWP.PostTV.EVENTS.PLAYER_CREATED,c);PubSub.publish(TWP.PostTV.EVENTS.WILL_CHANGE_EMBED_CODE,
{videoJson:a.json});a.sendTrackingData("Player Created",["event110"],{},{splunk:!0});a.setupOverlays();a.loadChartbeatVideoScript();isNaN(Number(c.customVolume))||a.player.setVolume(100*Number(c.customVolume))},onRecreated:function(){a.debugInfo.renderingMode=a.player.getProvider();a.initialTime&&a.player.seek(a.initialTime);a.playerCreated=!0;a.sendTrackingData("Player Recreated",["event110"],{},{splunk:!0});a.sendTrackingData("Player Recreated",["event110_01"],{},{splunk:!0});a.setupOverlays();
a.loadChartbeatVideoScript()},onSetupError:function(b){a.debug&&console.debug("onSetupError:",b);var f=-1<b.message.indexOf("No playable sources found"),k=-1<b.message.indexOf("Skin image not found: data:image");if(f){d(".ptv-promo").hide();d(".ptv-not-support-msg, .ptv-no-sources-msg").show();a.sendTrackingData("PostTV Player JW Error",["event9995"],{errorCode:"ptv_missingPTSStreams",errorText:"PostTV video is missing PTS streams."},{splunk:!0,omniture:!0,nielsen:!0});var e=b.message;!TWP.PostTV.isFlashEnabled&&
TWP.PostTV.isDeskweb&&a.isLiveVideo()&&(e="Please enable flash to watch this livestream");c.errorMessage=e;PubSub.publish(TWP.PostTV.EVENTS.ERROR,c,b.message)}else!0===b.fallback&&!TWP.PostTV.isFlashEnabled&&TWP.PostTV.isDeskweb&&d(".ptv-not-support-msg, .ptv-flash-required-msg").show();e=a.player.getSkin();f||k&&a.isImgNotFoundSent||a.sendTrackingData("JW Player Setup Error",a.getEventCode(b,"event9994"),{errorCode:"ptv_jwSetupError",errorText:JSON.stringify(b),skin:e?e:"(default)"},{splunk:!0,omniture:!0,
nielsen:!0});"undefined"!==typeof d.fn.wpLazyLoad&&d("#video-details-module-container, .playlist, .series-playlist").wpLazyLoad({breakpoints:[165,270]});TWP.PostTV.shouldRefreshPage=!0;k&&(a.isImgNotFoundSent=!0)}};a.jwPlaylistCallbacks={onPlaylist:function(b){TWP.PostTV.isDeskweb||a.player.getAutoplay()||a.showPromoScreen()},onPlaylistItem:function(b){a.mobilePlaylist&&(a.json=a.videoDataList[b.index],b=a.json.contentConfig&&a.json.contentConfig.uuid?a.json.contentConfig.uuid:"",a.methodeUuid=b,
a.updateChartbeatID(b),PubSub.publish(TWP.PostTV.EVENTS.WILL_CHANGE_EMBED_CODE,{videoJson:a.json}));a.player.isYouTube()&&a.sendTrackingData("PostTV Player JW YouTube Stream",["event9995_02"],{errorCode:"ptv_youtubeStream",errorText:"PostTV video is using a YouTube stream."},{splunk:!0,omniture:!0,nielsen:!0});a.isContentViewed||(a.isContentViewed=!0);a.initProgress();"function"==typeof a.callbacks.embedCodeChanged&&a.callbacks.embedCodeChanged(a);d.isEmptyObject(a.json)||a.$playerContainer.data("videoJson",
a.json)},onPlaylistComplete:function(){!a.isEmbed()||!a.mobilePlaylist&&a.showEndscreen||a.showPromoScreen()}};a.jwBufferCallbacks={onBufferChange:function(a){}};a.jwPlaybackCallbacks={onPlay:function(b){PubSub.publish(TWP.PostTV.EVENTS.PLAYING,c);a.sendTrackingData("onPlay","play",{},{comscore:!0});b.oldstate&&"PAUSED"===b.oldstate.toUpperCase()&&a.sendTrackingData("resume","event16",{},{splunk:!0})},onPause:function(b){if("function"===typeof a.callbacks.onPause)a.callbacks.onPause(b);PubSub.publish(TWP.PostTV.EVENTS.PAUSED,
c);a.sendTrackingData("pause","event15",{},{splunk:!0});a.sendTrackingData("onPause","stop",{},{comscore:!0})},onBuffer:function(b){if(b.oldstate&&"PLAYING"===b.oldstate.toUpperCase()&&!a.player.isBufferingExpected()){var c=TWP.PostTV.jwPlayerConfig.event9992Minimum||1E3;b=TWP.PostTV.jwPlayerConfig.event9992Throttle||5E3;a.event9992Throttled=a.event9992Throttled||f.throttle(function(){setTimeout(function(){"buffering"===a.player.getState()&&a.sendTrackingData("Player buffering",["event9992"],{},{splunk:!0})},
c)},b);a.event9992Throttled()}},onIdle:function(a){},onComplete:function(){"function"===typeof a.callbacks.playCompleted&&a.callbacks.playCompleted(a);var b=d.extend({hasRecommendedVideos:a.showEndscreen&&a.recommendedVideos.hasRecommendedVideos()},c);PubSub.publish(TWP.PostTV.EVENTS.PLAY_COMPLETED,b);a.sendTrackingData("onComplete","stop",{},{comscore:!0})},onError:function(b){console.debug("onError:",b);var d=a.getEventCode(b,"event9999");b.message&&"Error loading media: File could not be played"===
b.message&&(a.recommendedVideos.clear(),b.mitigation="Cleared 'Recommended Videos'. Count: "+a.recommendedVideos.getCount());a.sendTrackingData("JW Player Error",d,{errorCode:"ptv_jwError",errorText:JSON.stringify(b)},{splunk:!0,omniture:!0,nielsen:!0});-1===f.indexOf(["event9991_04"],d)?(a.addMsg({msg:b.message,className:"ptv-error-msg",time:1E4}),"function"==typeof a.callbacks.videoError&&a.callbacks.videoError(a),PubSub.publish(TWP.PostTV.EVENTS.ERROR,c,b.message)):a.debug&&console.log("Non blocking error detected")}};
a.jwSeekCallbacks={onSeek:function(b){if("function"===typeof a.callbacks.onSeek)a.callbacks.onSeek(b)},onTime:function(b){a.playheadTime=b.position;a.time=b.duration;"player-default-tracking"==a.trackingLevel&&a.trackProgress();!a.desktopPlaylist||a.recommendedVideos.requested()||this.player.isYouTube()||!isNaN(b.duration)&&!isNaN(b.position)&&b.position<=b.duration&&.8<b.position/b.duration&&a.recommendedVideos.fetch(a.json);b={time:a.playheadTime,duration:a.time,buffer:"",playStarted:a.player.isPlayingVideo()};
"function"===typeof a.callbacks.playheadTimeChanged&&a.callbacks.playheadTimeChanged(b);2<a.playheadTime&&a.player.showControls();PubSub.publish(TWP.PostTV.EVENTS.PLAYHEAD_TIME_CHANGED,b)}};a.jwVolumeCallbacks={onMute:function(a){},onVolume:function(b){a.setVolumeInCookie(a.volume);"function"===typeof a.callbacks.volumeChanged&&a.callbacks.volumeChanged(a);PubSub.publish(TWP.PostTV.EVENTS.VOLUME_CHANGED)}};a.jwResizeCallbacks={onFullscreen:function(b){a.$headline&&a.$headline.hide();PubSub.publish(TWP.PostTV.EVENTS.FULLSCREEN_CHANGED,
a.player.isFullscreen())},onResize:function(a){}};a.jwQualityCallbacks={onQualityLevels:function(b){a.sendTrackingData("Video Data Fetched",["event111"],{},{splunk:!0});PubSub.publish(TWP.PostTV.EVENTS.CONTENT_TREE_FETCHED)},onQualityChange:function(){}};a.jwCaptionsCallbacks={onCaptionsList:function(a){},onCaptionsChange:function(a){}};a.jwControlsCallbacks={onDisplayClick:function(){}};a.jwAdvertisingCallbacks={onAdClick:function(a){},onAdCompanions:function(a){},onAdComplete:function(b){"player-default-tracking"==
a.trackingLevel&&(b=a.player.getAdMeta(),a.sendTrackingData("Video Ad Complete",["event8"],{adsDuration:b&&b.duration?b.duration:e},{splunk:!0,omniture:!0,nielsen:!0}))},onAdError:function(b){console.debug("onAdError",b);"player-default-tracking"==a.trackingLevel&&(b.adMeta=a.player.getAdMeta(),a.sendTrackingData("Video Ad Error",["event9996"],{adError:JSON.stringify(b)},{splunk:!0}))},onAdImpression:function(a){},onAdMeta:function(a){},onAdPause:function(a){},onAdPlay:function(b){PubSub.publish(TWP.PostTV.EVENTS.AD_STARTED,
c);"function"===typeof a.callbacks.adStarted&&a.callbacks.adStarted(a)},onAdSkipped:function(){"player-default-tracking"==a.trackingLevel&&a.sendTrackingData("Skip Ad Button Clicked",["event34"],{},{splunk:!0,omniture:!0,nielsen:!0})},onAdTime:function(a){},onBeforePlay:function(){C||(C=!0,a.sendTrackingData("Player Controls Ready",["event112"],{},{splunk:!0}),PubSub.publish(TWP.PostTV.EVENTS.PLAYBACK_READY,c));(TWP.PostTV.isMobile||TWP.PostTV.isTablet)&&a.player.setVolume(100)},onBeforeComplete:function(){"player-default-tracking"===
a.trackingLevel&&a.trackProgress(100)}};a.jwMetadataCallbacks={onMeta:function(b){b=b.metadata||b;b.bandwidth&&1E9>b.bandwidth&&(b.bandwidth=parseFloat((b.bandwidth/1024).toFixed(3)),a.debugInfo.bandwidths=a.debugInfo.bandwidths||[],a.debugInfo.bandwidthLow=a.debugInfo.bandwidthLow||Infinity,a.debugInfo.bandwidthHigh=a.debugInfo.bandwidthHigh||-Infinity,a.debugInfo.bandwidths.push(b.bandwidth),a.debugInfo.bandwidthLow=b.bandwidth<a.debugInfo.bandwidthLow?b.bandwidth:a.debugInfo.bandwidthLow,a.debugInfo.bandwidthHigh=
b.bandwidth>a.debugInfo.bandwidthHigh?b.bandwidth:a.debugInfo.bandwidthHigh);a.debugInfo=a.debugInfo?f.extend(a.debugInfo,b):b;a.$debugOverlay&&a.$debugOverlay.html(da({debug:f.omit(a.debugInfo,["bandwidths","segment"])}))}};a.jwCallbacks=f.extend({},a.ptvCallbacks,a.jwSetupCallbacks,a.jwPlaylistCallbacks,a.jwBufferCallbacks,a.jwPlaybackCallbacks,a.jwSeekCallbacks,a.jwVolumeCallbacks,a.jwResizeCallbacks,a.jwQualityCallbacks,a.jwCaptionsCallbacks,a.jwControlsCallbacks,a.jwAdvertisingCallbacks,a.jwMetadataCallbacks);
a.addMsg=function(b){var c=b.time||2E3;this.$msgBox=d(z({config:b}));a.player.get$innerWrapper().append(this.$msgBox);this.$msgBox.fadeOut(c,f.bind(function(){this.$msgBox.remove()},this))};a.setupOverlays=function(){var b=/.*(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).*/g,c=-1<document.URL.indexOf("localhost")||b.test(document.URL),e={regEx:/ads/i,callback:f.bind(function(){var a={className:"ptv-ad-blocker",style:"color: #CCC; text-shadow: 0px 0px 3px rgba(0, 0, 0, 0.75); margin: 5px;"};
TWP.PostTV.togglePreRollsBlocked({expires:(new Date("1/1/2022")).toGMTString()});TWP.PostTV.getPreRollsBlocked()||c?(a.html="<strong>Ads disabled</strong>",this.player.isPlayingAd()&&this.player.skipAd()):a.html="<strong>Ads enabled</strong>";this.addMsg(a);value=""},a)};PubSub.subscribe(TWP.PostTV.EVENTS.SKIP_AD_DEMO,e.callback);var g={regEx:/debug/i,callback:f.bind(function(){this.$debugOverlay?(this.$debugOverlay.remove(),delete this.$debugOverlay):(this.$debugOverlay=d(v()),a.player.get$innerWrapper().append(this.$debugOverlay));
value=""},a)};return function(){a.player.get$playerContainer().on("mouseenter.overlay",function(a){var b=d(this),c=d(document),f="";c.off("keypress.overlay").on("keypress.overlay",function(a){f+=String.fromCharCode(a.which);e.regEx.test(f)&&e.callback();g.regEx.test(f)&&g.callback();a.stopPropagation()});b.on("mouseleave.overlay",function(a){c.off("keypress.overlay");b.off("mouseleave.overlay");f=""})})}}();a.bindBlurEvents=function(){d(window).on("focus",function(){a.pause()});d(window).on("blur",
function(){a.pause()})};a.unbindBlurEvents=function(){d(window).off("focus blur")};a.preventHpRefresh=function(){try{a.isModal||(TWP.hpRefreshTests[a.playerContainerId]=function(){return!1})}catch(b){}};a.allowHpRefresh=function(){try{a.isModal||delete TWP.hpRefreshTests[a.playerContainerId]}catch(b){}};a.digestBandwidth=function(){var b={};a.debugInfo.bandwidthLow&&a.debugInfo.bandwidthHigh&&a.debugInfo.bandwidths&&a.debugInfo.bandwidths.length&&(a.debugInfo.bandwidthAvg=f.reduce(a.debugInfo.bandwidths,
function(a,b){return a+b},0),a.debugInfo.bandwidthAvg=parseFloat((a.debugInfo.bandwidthAvg/a.debugInfo.bandwidths.length).toFixed(3)),b={bandwidthLow:a.debugInfo.bandwidthLow,bandwidthHigh:a.debugInfo.bandwidthHigh,bandwidthAvg:a.debugInfo.bandwidthAvg});return b};a.trackProgress=function(b,c){b=b||0===b?b:Math.round(100*a.playheadTime/a.time);("undefined"==typeof a.allowTrackProgress||0!=a.allowTrackProgress)&&f.has(a.progress,b)&&f.each(a.progress[b],function(b){var d,e,g;b.triggered||(b.triggered=
!0,f.extend(b.tracking.props,c),f.extend(b.tracking.props,a.digestBandwidth()),d=b.tracking.name,e=b.tracking.event,g=b.tracking.props,b=b.tracking.trackers,a.sendTrackingData(d,e,g,b))})};a.initProgress=function(){var b=a.json.contentConfig.videoDuration/1E3,c,f,e,g;a.progress={};for(var n=0;n<=a.progressIntervals;n++){c=""+Math.round(100*n/a.progressIntervals);switch(c){case "0":f="Video Start";e="event9";g={};break;case "25":f="Video 25% Complete";e="event10";g={};break;case "50":f="Video 50% Complete";
e="event11";g={};break;case "75":f="Video 75% Complete";e="event12";g={};break;case "100":f="Video Complete";e="event13";g={};break;default:e=f="",g={}}a.progress[c]=a.progress[c]||[];a.progress[c].push({triggered:!1,tracking:{name:f,event:e,props:d.extend(g,{isPlayingInEndscreen:a.args.isPlayingInEndscreen}),trackers:{nielsen:!0,omniture:!0,splunk:!0}}})}c=Math.round(100*(b-15)/b);a.progress[c]=a.progress[c]||[];a.progress[c].push({triggered:!1,tracking:{name:"Video 15s prior to Complete",event:"event13_01",
props:{},trackers:{splunk:!0}}})};a.imageForNielsenBeacon=null;a.getSectionAsPrefix=function(){var b=c.section?c.section.toLowerCase():a.json.metaConfig&&a.json.metaConfig.section?a.json.metaConfig.section.toLowerCase():"";/^\/([^\/]+)/.test(b)&&(b=RegExp.$1.toLowerCase());return b+(b?":":"")};a.getEstDateString=function(a){a=new Date(a+6E4*(new Date(a)).getTimezoneOffset()-18E6);return a.getMonth()+1+"/"+a.getDate()+"/"+a.getFullYear()};a.getParentTrackingData=function(){if("undefined"===typeof a.parentTrackingData)if(window!=
window.parent)try{"undefined"!=typeof window.parent.s&&(a.parentTrackingData={channel:window.parent.s.channel,type:window.parent.s.prop3,pageName:window.parent.s.pageName})}catch(b){}else"undefined"!=typeof window.s&&(a.parentTrackingData={channel:window.s.channel,type:window.s.prop3,pageName:window.s.pageName})};a.getEmbedTrackingData=function(){if("posttv-embed"===a.playerType){var b=d("#"+a.playerContainerId),c,f;try{window.self===window.top?(c=b.offset().top,f=-1<d(".wpv-player").index(b)?d(".wpv-player").index(b)+
1:e):window.frameElement&&(c=d(window.frameElement).parent().attr("data-offset-top"),f=d(window.frameElement).parent().attr("data-nth-video-on-page"))}catch(g){console.log(g)}a.embedTrackingData={offsetTop:Math.round(c),nthVideoOnPage:f};TWP.Data=TWP.Data||{};TWP.Data.VideoData=TWP.Data.VideoData||{};TWP.Data.VideoData.props=TWP.Data.VideoData.props||{};TWP.Data.VideoData.props.offsetTop=a.embedTrackingData.offsetTop;TWP.Data.VideoData.props.nthVideoOnPage=a.embedTrackingData.nthVideoOnPage}};a.getTrackingData=
function(){var b=/[^\w\s\-.,]/g,f=/\s+/g,k=/%22|%27/g;return function(g){a.json=a.json||{};a.json.metaConfig=a.json.metaConfig||{};a.json.showsConfig=a.json.showsConfig||{};a.json.contentConfig=a.json.contentConfig||{};a.json.liveEventConfig=a.json.liveEventConfig||{};a.json.contentConfig.dateConfig=a.json.contentConfig.dateConfig||{};g=g||{};var n=/^(fbInstant|amp|pwa)$/.test(queryStringObj.embedContext)?queryStringObj.embedContext.toLowerCase():e,h=a.playerType;n&&(h+="-"+n);var l=a.player&&a.player.isPlayingAd(),
q=a.json.contentConfig.credits||{},v=a.getEstDateString(a.json.contentConfig.dateConfig.dateFirstPublished?a.json.contentConfig.dateConfig.dateFirstPublished:a.json.contentConfig.dateConfig.displayDate?a.json.contentConfig.dateConfig.displayDate:""),F=a.json.liveEventConfig?!0:!1,z=a.getSectionAsPrefix(),p=a.json.contentConfig.videoDuration?a.json.contentConfig.videoDuration/1E3:0,w=a.json.metaConfig.order&&isFinite(a.json.metaConfig.order)?a.json.metaConfig.order:a.json.showsConfig.length?a.json.showsConfig[0].clipDisplayOrder:
0,t=(c.title||a.json.contentConfig.title||"no title").toLowerCase().replace(b,"").replace(f," ").replace(k,""),C;try{C="amp"===n?"amphtml":n?n:window.self===window.top&&-1<document.domain.indexOf("washingtonpost.com")?"www.washingtonpost.com":window.self!==window.top&&"document.domain"==document.domain&&document.domain===window.top.document.domain?"www.washingtonpost.com":e}catch(x){console.log(x)}var y=window.self!==window.top;a.switchVideo&&(u=m,a.switchVideo=!1);m=z+"video - "+v+" - "+t;a.getParentTrackingData();
a.getEmbedTrackingData();return d.extend({UUID:a.json.contentConfig.uuid||"",vendor:"jw",sessionId:TWP.PostTV.getCookie("s_vi"),page:a.parentTrackingData&&a.parentTrackingData.pageName?a.parentTrackingData.pageName:"posttv-embed"===a.playerType&&window.s&&window.s.pageName?window.s.pageName:m,channel:a.parentTrackingData&&a.parentTrackingData.channel?a.parentTrackingData.channel:"wp - posttv",video:m,title:m,type:a.parentTrackingData&&a.parentTrackingData.type?a.parentTrackingData.type:"video",section:(c.section||
a.json.metaConfig.section||"").toLowerCase(),subsection:(c.subsection||a.json.metaConfig.subsection||"").toLowerCase(),source:a.json.contentConfig.trackAsPool?"pool video":q.source?q.source.toLowerCase():"",dateFirstPublished:a.json.contentConfig.dateConfig.dateFirstPublished?a.json.contentConfig.dateConfig.dateFirstPublished:"",dateLastPublished:a.json.contentConfig.dateConfig.dateLastPublished?a.json.contentConfig.dateConfig.dateLastPublished:"",videoName:q.editor?q.editor.toLowerCase():"",userInfo:TWP.PostTV.BrowserInfo.OS.toLowerCase()+
" "+TWP.PostTV.BrowserInfo.browser.toLowerCase()+" v"+TWP.PostTV.BrowserInfo.version,browser:TWP.PostTV.BrowserInfo.browser.toLowerCase(),os:TWP.PostTV.BrowserInfo.OS.toLowerCase(),browserVersion:TWP.PostTV.BrowserInfo.version,webview:TWP.PostTV.BrowserInfo.webview,flashVersion:"undefined"===typeof swfobject?"n/a":swfobject.getFlashPlayerVersion().major+"."+swfobject.getFlashPlayerVersion().minor+"."+swfobject.getFlashPlayerVersion().release,previousVideo:u,adsDuration:a.ads&&a.ads.duration?Math.round(a.ads.duration):
"",playerType:h,videoType:a.isLiveStream?"livestream":"vod",isLiveStream:a.isLiveStream||F||"live"===a.json.contentConfig.type,isAd:l,adSetCode:a.adSetCode,isFullEpisode:"episode"===a.json.contentConfig.type,isClip:!l&&"clip"===a.json.contentConfig.type,segment:w,durationInSeconds:l&&a.ads?a.ads.duration:Math.round(p),countOfClips:0,offsetTop:a.embedTrackingData&&a.embedTrackingData.offsetTop,nthVideoOnPage:a.embedTrackingData&&a.embedTrackingData.nthVideoOnPage,renderingMode:a.player&&a.player.getProvider?
a.player.getProvider():"",shape:a.json.contentConfig.vertical?"vertical":"horizontal",embedContext:n,site:C,video360:a.json.contentConfig.video360?!0:!1,isIframe:y},g)}}();a.sendTrackingData=function(b,c,d,e){var g={comscore:a.sendDataToComscore,nielsen:a.sendDataToNielsen,omniture:a.sendDataToOmniture,splunk:a.sendDataToSplunk};e=f.isEmpty(e)?g:f.pick(g,function(a,b){return e[b]});d=a.getTrackingData(d);a.debugTracking&&console.debug("sendTrackingData",b,c,d);f.each(e,function(a){a(b,c,d)});return a};
a.equalsOrIsInArray=function(a,c){return c===a||d.isArray(c)&&-1!=d.inArray(a,c)};a.sendDataToNielsen=function(b,d,f){!a.equalsOrIsInArray("event7",d)&&a.equalsOrIsInArray("event9",d)&&(b=a.getSectionAsPrefix(),d=c.title?c.title:a.json.contentConfig&&a.json.contentConfig.title?a.json.contentConfig.title:"",d=b+d.toLowerCase(),b="&rnd="+Math.ceil(1E9*Math.random()),d="&tl=dav0-"+encodeURIComponent(d),f="&cg="+encodeURIComponent(""),b="//secure-us.imrworldwide.com/cgi-bin/m?ci=us-904793&c6=vc,b01&cc=1"+
b+d+f+"",a.imageForNielsenBeacon="",a.imageForNielsenBeacon=new Image,a.imageForNielsenBeacon.src=b,a.debugTracking&&console.debug("sendDataToNielsen()",b))};a.calcTrackingEVarValue=function(b,c){var d="";switch(b){case "eVar41":d=a.json.videoCategoryConfig&&a.json.videoCategoryConfig[0]&&a.json.videoCategoryConfig[0].seriesConfig?"series":a.json.videoCategoryConfig&&a.json.videoCategoryConfig[0]?a.json.videoCategoryConfig[0].id:c.section;break;case "eVar43":a.json.producerConfig&&a.json.producerConfig.createdBy&&
a.json.producerConfig.createdBy.name&&a.json.producerConfig.createdBy.lastname&&(d=a.json.producerConfig.createdBy.name+" "+a.json.producerConfig.createdBy.lastname)}return d};a.sendDataToOmniture=function(b,f,e){if(window.s&&"function"==typeof s.sendDataToOmniture&&e)try{var g=d.extend({eVar1:e.page,eVar2:e.channel,eVar6:e.video,eVar8:e.videoName,eVar12:e.UUID,eVar13:e.title,eVar17:e.type,prop19:e.evtAction?"posttv - "+e.evtModule+" - "+e.evtAction:"",eVar36:e.nthVideoOnPage&&e.offsetTop?d("#"+c.playerContainerId).hasClass("wpv-sticky-engaged")?
e.nthVideoOnPage+":"+e.offsetTop+":sticky":e.nthVideoOnPage+":"+e.offsetTop:"",eVar37:e.durationInSeconds+(e.shape?":"+e.shape:""),eVar41:a.calcTrackingEVarValue("eVar41",e),eVar42:e.source,eVar43:a.calcTrackingEVarValue("eVar43",e),eVar44:e.userInfo,eVar46:e.previousVideo,eVar47:e.subsection,eVar48:e.adsDuration,eVar49:e.playerType,eVar50:e.renderingMode,eVar58:e.site,prop58:e.site},a.appendToOmniture,e);b=b||"";f=f||[];a.debugTracking&&console.debug("sendDataToOmniture()",b,f,[g]);s.sendDataToOmniture(b,
f,g,{wait:!0})}catch(n){console.debug("Unable to send tracking data to omniture: "+n.stack)}return a};a.sendDataToSplunk=function(b,c,e){var g=f.now(),n={browser:e.browser,os:e.os,browserVersion:e.browserVersion,build:"0435087",webview:e.webview,flashVersion:e.flashVersion,vendor:e.vendor,sessionId:e.sessionId,page:e.page,channel:e.channel,video:e.title,videoId:a.methodeUuid,videoName:e.title,videoType:e.videoType,videoSource:e.source,dateFirstPublished:e.dateFirstPublished,dateLastPublished:e.dateLastPublished,
type:e.type,creativeType:e.creativeType,section:e.section,url:document.URL,HTTP_REFERER:document.referrer,adsDuration:e.adsDuration,playerType:e.playerType,adSetCode:e.adSetCode,evtName:b,evtType:"string"==typeof c?c:c[0]||"",evtAction:e.evtAction,evtGroup:e.evtGroup,evtModule:e.evtModule,evtTime:g,targetUrl:e.targetUrl,errorCode:e.errorCode,errorText:e.errorText,offsetTop:e.offsetTop,nthVideoOnPage:e.nthVideoOnPage,xWpSplit:TWP.PostTV.getCookie("X-WP-Split"),thinkAdBlock:TWP.PostTV.BrowserInfo.thinkAdBlock,
renderingMode:e.renderingMode,jwVersion:window.jwplayer.version?window.jwplayer.version.split("+")[0]:"",isPlayingInEndscreen:e.isPlayingInEndscreen,durationInSeconds:e.durationInSeconds,shape:e.shape,embedContext:e.embedContext,site:e.site,video360:e.video360,isIframe:e.isIframe},h=f.pick(e,["errorText","adError"]),l=f.pick(e,["adLoadDelta","hasPlayedAd","pageLoadDelta","playerLoadDelta","videoLoadDelta"]),m=f.pick(e,["bandwidthLow","bandwidthHigh","bandwidthAvg"]),h=f.pick(h,f.identity),l=f.pick(l,
f.identity),m=f.pick(m,f.identity);l.videosPlayed=e.videosPlayed;f.extend(n,h,l,m);if(e)try{c="undefined"==typeof c?"":"string"==typeof c?c:d.isArray(c)?c[0]:"",g=e.evtTime||g,a.debugTracking&&console.debug("sendDataToSplunk()",b,c,[n]),d.ajax({url:"//videotracker.washingtonpost.com/index.html",dataType:"jsonp",cache:!1,timeout:3E3,data:n}),window.TWP&&TWP.Data&&TWP.Data.Splunk&&(TWP.Data.Splunk.addToHistory&&TWP.Data.Splunk.addToHistory(a.methodeUuid,c,g),TWP.Data.Splunk.sendQueued&&TWP.Data.Splunk.sendQueued())}catch(u){console.log("Unable to send tracking data: "+
u.stack)}};a.sendDataToComscore=function(b,c){a.comscoreTag=a.comscoreTag||new ns_.StreamingTag({customerC2:"3005617"});"play"===c?a.comscoreTag.playVideoContentPart({ns_st_ci:a.json.contentConfig.uuid,c3:"*null",c4:"*null",c6:"*null"}):"adPlay"===c?a.comscoreTag.playVideoAdvertisement():"stop"===c&&a.comscoreTag.stop()};a.updateChartbeatID=function(b){b=b||a.json.contentConfig.uuid;window._cbv.push(["setProps",{player:jwplayer(a.playerElementId),videopath:b}])};a.loadChartbeatVideoScript=function(){window._cbv?
(window._cbv.push(window.jwplayer(a.playerElementId)),a.updateChartbeatID(a.json.contentConfig.uuid)):(window._cbv=[],d.ajax({dataType:"script",cache:!0,url:"//static.chartbeat.com/js/chartbeat_video.js",success:function(b,c,d){a.updateChartbeatID(a.json.contentConfig.uuid)}}))};a.removeChartbeatPlayer=function(){window._cbv.push(["removePlayer",jwplayer(a.playerElementId)])};a.updateMetaTag=function(a){if(d(a.selector).length)d(a.selector).attr("content",a.content);else{var c={};c[a.nameAttr]=a.name;
c.content=a.content;d("<meta/>",c).appendTo("head")}};a.onPlayerCreated=function(b){a.callbacks.playerCreated=b;return a};a.onEmbedCodeChanged=function(b){a.callbacks.embedCodeChanged=b;return a};a.onContentTreeFetched=function(b){a.callbacks.contentTreeFetched=b;return a};a.onPlayStarted=function(b){a.callbacks.editorialPlayStarted=b;return a};a.onPlayCompleted=function(b){a.callbacks.playCompleted=b;return a};a.onSeek=function(b){a.callbacks.onSeek=b;return a};a.onPause=function(b){a.callbacks.onPause=
b;return a};a.onCompanionAdsReady=function(b){a.callbacks.companionAds=b;return a};a.onAdStarted=function(b){a.callbacks.adStarted=b;return a};a.onAdCompleted=function(b){a.callbacks.adCompleted=b;return a};a.onPlayheadTimeChanged=function(b){a.callbacks.playheadTimeChanged=b;return a};a.onVolumeChanged=function(b){a.callbacks.volumeChanged=b;return a};a.onVideoError=function(b){a.callbacks.videoError=b;return a};a.play=function(){a.player&&a.player.play()};a.forcePlay=function(){a.player&&a.player.forcePlay()};
a.pause=function(){a.player&&a.player.pause()};a.stop=function(){a.player&&a.player.stop()};a.seek=function(b){a.player&&a.player.seek(b)};a.skipAd=function(){a.player&&a.player.skipAd()};a.setAutoplay=function(b){a.player&&a.player.setAutoplay(b)};a.destroy=function(){a.player&&a.player.destroyPlayer()};a.resize=function(b,c){a.player&&a.player.resize(b,c)};a.bindPlayerContainerHandlers=function(){var a=this;a.$playerContainer.data("autopreview")&&PubSub.subscribe(TWP.PostTV.EVENTS.VISIBILITY_CHANGED,
a.handleVisibilityChanged);PubSub.subscribe(TWP.PostTV.EVENTS.PLAY,a.play);PubSub.subscribe(TWP.PostTV.EVENTS.PAUSE,a.pause);PubSub.subscribe(TWP.PostTV.EVENTS.STOP,a.stop);PubSub.subscribe(TWP.PostTV.EVENTS.DESTROY,a.destroy);PubSub.subscribe(TWP.PostTV.EVENTS.SKIP_AD,a.skipAd);PubSub.subscribe(TWP.PostTV.EVENTS.SHOW_PROMO_SCREEN,a.showPromoScreen);PubSub.subscribe(TWP.PostTV.EVENTS.PLAY_NEXT_VIDEO,function(){a.onPlayNextVideo.apply(a,Array.prototype.slice.call(arguments,1))});PubSub.subscribe(TWP.PostTV.EVENTS.SET_VOLUME,
function(){a.player.setVolume.apply(a,Array.prototype.slice.call(arguments,1))});PubSub.subscribe(TWP.PostTV.EVENTS.SEEK,function(){a.player.seek.apply(a,Array.prototype.slice.call(arguments,1))});PubSub.subscribe(TWP.PostTV.EVENTS.RESIZE,function(){a.player.resize.apply(a,Array.prototype.slice.call(arguments,1))});PubSub.subscribe(TWP.PostTV.EVENTS.SEND_TRACKING_DATA,a.handleTrackingData);TWP.PostTV.isPubSub=!0};return function(){a.json=c.json||{};a.args=c.args||{};a.trendingJson=c.trendingJson||
{};a.embedCode=c.embedCode||("contentConfig"in a.json?a.json.contentConfig.videoContentId:"");a.methodeUuid="contentConfig"in a.json?a.json.contentConfig.uuid:"";a.playerContainerId=c.playerContainerId||"posttv-player-container";a.playerElementId=a.playerContainerId+"-JW";a.$playerContainer=d("#"+a.playerContainerId);a.$playerContainer.append('<div id="'+a.playerElementId+'"></div>');a.bindPlayerContainerHandlers();a.playerType=c.playerType||"";a.isModal=a.$playerContainer.hasClass("modal");a.isAutoplaying=
!1;a.width=c.width||a.$playerContainer.width()||480;a.height=c.height||parseInt(.5625*a.width)||270;a.jwArgs=c.jwArgs||{};a.player=null;a.callbacks={};a.mbSubscriber=c.playerType||"default-video-page";a.autoplay=TWP.PostTV.isTablet||TWP.PostTV.isMobile?!1:"string"==typeof c.autoplay?!!parseInt(c.autoplay):c.autoplay||!1;a.initialTime=c.initialTime||0;a.wmode=c.wmode||"opaque";a.showEndscreen="undefined"!=typeof c.showEndscreen?c.showEndscreen:!1;a.desktopPlaylist=a.showEndscreen&&TWP.PostTV.isDeskweb&&
"posttv-embed"===c.playerType;a.mobilePlaylist=a.showEndscreen&&(TWP.PostTV.isMobile||TWP.PostTV.isTablet)&&"posttv-embed"===c.playerType;a.hide=c.hide?c.hide:a.showEndscreen?"info,sharing,channels,embed":"info,sharing,channels,embed,endscreen";a.showSharingOverlay=c.showSharingOverlay;a.hideOverlayButtons=c.hideOverlayButtons;a.flashParams=c.flashParams||{};a.locale=c.locale||{};a.loop=!!c.loop||!1;a.version=c.version||1;a.playheadTime=0;a.volume=isNaN(Number(c.volume))?a.getVolumeFromCookie():Number(c.volume);
a.playerCreated=!1;a.showAdsForFirstVideoOnly="boolean"===typeof c.showAdsForFirstVideoOnly?c.showAdsForFirstVideoOnly:!1;a.allowTrackProgress="undefined"!=typeof c.args.allowTrackProgress?c.args.allowTrackProgress:!0;a.showCompanionAdIfAny=c.showCompanionAdIfAny?!0:!1;a.appendToOmniture={};a.trackingLevel=c.trackingLevel||"player-default-tracking";a.progressIntervals=4;a.isPlaylist=c.isPlaylist||!1;a.initProgress();TWP.PostTV.players[a.playerContainerId]=a;var b;"undefined"!==typeof TWP.PostTV.BrowserInfo.thinkAdBlock?
b=TWP.PostTV.BrowserInfo.thinkAdBlock:(0===d("#wpvCanary").length&&d("body").append('<div id="wpvCanary" class="bottomAd" style="color: white; height: 2px"></div>'),b=!!(0<d("#wpvCanary").filter(":hidden").length||0==d("#wpvCanary").filter(":visible").length));a.thinkAdBlock=b}()}}(jQuery,_);TWP.PostTV.Player=TWP.PostTV.PlayerJW;TWP.PostTV.InlinePlayerCounter=isNaN(TWP.PostTV.InlinePlayerCounter)?0:TWP.PostTV.InlinePlayerCounter;(function(d){TWP.PostTV.InlinePlayerJW=TWP.PostTV.InlinePlayerJW||function(f,
e){e=e||{};var c=this,p=document.all&&!document.querySelector?!0:!1,h;h=/^(\/video|\/posttv)/.test(window.wp_pb&&wp_pb.contextPath)?wp_pb.contextPath:window.location.protocol+"//www.washingtonpost.com/video";var g=d('script[src*="jwPlayerWrapper.js"], script[src*="jwPlayerWrapper.min.js"]').attr("src");if(g){var a=-1<g.indexOf("/static/js/posttv")?g.indexOf("/static/js/posttv"):g.indexOf("/resources/js/posttv");-1<a&&(h=g.substr(0,a),0===h.indexOf("//")&&(h=window.location.protocol+h))}var t=function(a){return!0===
a||"string"===typeof a&&"true"===a.toLowerCase()||1===parseInt(a)},m=function(a){return void 0!==a&&""!==a&&!t(a)};c.preparePlayerContainer=function(a){var f=d(a),g=t(f.attr("data-autoplay"));a=f.attr("data-uuid")||f.attr("data-object-id");var x=d.isEmptyObject(c.json),y,I,l;x&&(y="cb_"+f.attr("data-uuid").replace(/-/g,""),-1<window.location.hostname.indexOf("local")||a&&-1===a.indexOf("-")?(I="undefined"!=typeof a?h+"/c/videojson/"+a:"",l="callback"):(I="undefined"!=typeof a?h+"/findbyUuid/"+a:"",
l="cb"));var E=d.isEmptyObject(c.trendingJson);c.showEndscreen="undefined"==typeof f.attr("data-show-endscreen")||"undefined"!=typeof f.attr("data-show-endscreen")&&1==f.attr("data-show-endscreen");c.showSharingOverlay=t(f.attr("data-show-posttv-overlay"));c.playerType="undefined"!=typeof f.attr("data-player-type")?f.attr("data-player-type"):f.hasClass("posttv-video-embed")?"posttv-embed":"";c.initialTime="undefined"!=typeof f.attr("data-initial-time")?isNaN(parseFloat(f.attr("data-initial-time")))?
0:parseFloat(f.attr("data-initial-time"))/1E3:0;c.loop=t(f.attr("data-loop"));c.wmode="undefined"!=typeof f.attr("data-wmode")?f.attr("data-wmode"):"";c.hide="undefined"!=typeof f.attr("data-hide")?f.attr("data-hide"):"";c.trackingLevel="undefined"!=typeof f.attr("data-tracking-level")?f.attr("data-tracking-level"):"";c.showCompanionAdIfAny=t(f.attr("data-companion-ad"));c.adSetCode="undefined"!=typeof f.attr("data-adset-code")?f.attr("data-adset-code"):"";c.adSetZone="undefined"!=typeof f.attr("data-adset-zone")?
f.attr("data-adset-zone"):"";c.adLengthParam="undefined"!=typeof f.attr("data-ad-length-param")?f.attr("data-ad-length-param"):"";c.adZone="undefined"!=typeof f.attr("data-ad-zone")?f.attr("data-ad-zone"):"";c.adFreq="undefined"!=typeof f.attr("data-ad-freq")?f.attr("data-ad-freq"):TWP.PostTV.adFrequency;c.allowAd=!m(f.attr("data-show-ad"))&&!m(queryStringObj.showAds);c.showAdsForFirstVideoOnly=t(f.attr("data-show-ads-for-first-video-only"));c.adPattern="undefined"!=typeof f.attr("data-ad-pattern")?
f.attr("data-ad-pattern"):"";c.adPattern=c.adPattern.split("");c.adTagSuffix="undefined"!=typeof f.attr("data-adtagurl-suffix")?f.attr("data-adtagurl-suffix"):"";c.volume=isNaN(Number(f.attr("data-volume")))?1:f.attr("data-volume");c.customVolume=f.attr("data-volume");c.useCustomScrubber="undefined"!=typeof f.attr("data-use-custom-scrubber")?1==f.attr("data-use-custom-scrubber"):!1;c.aspectRatio="undefined"==typeof f.attr("data-aspect-ratio")?void 0:f.attr("data-aspect-ratio");c.hideOverlayButtons=
f.attr("data-hide-posttv-overlay-buttons");c.allowControls="undefined"==typeof f.attr("data-allow-controls")?!0:1==f.attr("data-allow-controls")?!0:!1;var D=function(a){function h(){var d=(a.contentConfig.streams||a.liveEventConfig.streams)[0];d&&(c.aspectRatio=getAspectRatio(d.width,d.height))}if(d.isEmptyObject(a))console.error("json is empty, returning from createPlayer"),PubSub.publish(TWP.PostTV.EVENTS.ERROR,{playerContainerId:f.attr("id")},"Unable to fetch Video Data");else if(a.contentConfig.streams||
a.liveEventConfig.streams){h();c.player=new TWP.PostTV.PlayerJW({args:e,json:a,trendingJson:c.trendingJson,playerContainerId:f.attr("id"),autoplay:g,playerType:c.playerType,initialTime:c.initialTime,loop:c.loop,wmode:c.wmode,css:c.css,trackingLevel:c.trackingLevel,showCompanionAdIfAny:c.showCompanionAdIfAny,adSetCode:c.adSetCode,adSetZone:c.adSetZone,adLengthParam:c.adLengthParam,adZone:c.adZone,adFreq:c.adFreq,adPattern:c.adPattern,adTagSuffix:c.adTagSuffix,allowAd:c.allowAd,showAdsForFirstVideoOnly:c.showAdsForFirstVideoOnly,
volume:c.volume,customVolume:c.customVolume,hide:c.hide?c.hide:c.useCustomScrubber?"all":"",showEndscreen:c.showEndscreen,showSharingOverlay:c.showSharingOverlay,hideOverlayButtons:c.hideOverlayButtons,aspectRatio:c.aspectRatio,allowControls:c.allowControls});c.player.onCompanionAdsReady(function(){c.player.showCompanionAdIfAny&&!c.player.isFullscreen()&&(c.player.companionOpts=d.isEmptyObject(e.companionOpts)?{companionClassName:"mp-companion-ad"}:e.companionOpts,p&&jQuery.extend(!0,c.player.companionOpts,
{style:{position:"absolute",paddingLeft:"25px"}}));if(e.callbacks&&"function"==typeof e.callbacks.onCompanionAdsReady)e.callbacks.onCompanionAdsReady(c.player);return c.player});c.player.onAdCompleted(function(){if(e.callbacks&&"function"==typeof e.callbacks.onAdCompleted)e.callbacks.onAdCompleted(c.player);return c.player});c.player.onPlayStarted(function(){if(e.callbacks&&"function"==typeof e.callbacks.onPlayStarted)e.callbacks.onPlayStarted(c.player)});if(c.callback)c.player.onEmbedCodeChanged(function(){TWP.PostTV.debug&&
console.log("onEmbedCodeChanged()");c.callback(c.player)});if(e.callbacks){if("function"==typeof e.callbacks.onPlayerCreated)c.player.onPlayerCreated(function(){e.callbacks.onPlayerCreated(c.player)});if("function"==typeof e.callbacks.onEmbedCodeChanged)c.player.onEmbedCodeChanged(function(){e.callbacks.onEmbedCodeChanged(c.player)});if("function"==typeof e.callbacks.onContentTreeFetched)c.player.onContentTreeFetched(function(){e.callbacks.onContentTreeFetched(c.player)});if("function"==typeof e.callbacks.onPlayCompleted)c.player.onPlayCompleted(function(){e.callbacks.onPlayCompleted(c.player)});
if("function"==typeof e.callbacks.onSeek)c.player.onSeek(function(a){e.callbacks.onSeek(c.player,a)});if("function"==typeof e.callbacks.onPause)c.player.onPause(function(a){e.callbacks.onPause(c.player,a)});if("function"==typeof e.callbacks.onAdStarted)c.player.onAdStarted(function(){e.callbacks.onAdStarted(c.player)});if("function"==typeof e.callbacks.onPlayheadTimeChanged)c.player.onPlayheadTimeChanged(function(a){e.callbacks.onPlayheadTimeChanged(c.player,a)});if("function"==typeof e.callbacks.onVolumeChanged)c.player.onVolumeChanged(function(){e.callbacks.onVolumeChanged(c.player)});
if("function"==typeof e.callbacks.onVideoError)c.player.onVideoError(function(){e.callbacks.onVideoError(c.player)})}c.player.create()}else console.error("contentConfig.streams and liveEventConfig.streams are both null"),PubSub.publish(TWP.PostTV.EVENTS.ERROR,{playerContainerId:f.attr("id")},"JSON does not have streams")};d.when(function(){var a=d.Deferred();x?d.ajax({type:"GET",url:I,contentType:"application/json",jsonpCallback:y,jsonp:l,data:{resType:"jsonp"},dataType:"jsonp",cache:!0,success:function(c,
d,e){"object"===typeof window.console&&console.log("Fetched video json",c,d,e);a.resolve(e,c)},error:function(c,d){"object"===typeof window.console&&console.log("Failed to fetch video jsonp at: "+I+", e: ",c);a.resolve(c)}}):a.resolve();return a.promise()}(),function(){var a=d.Deferred();E?d.ajax({type:"GET",url:"//analytics.posttv.com/trending-videos-overall.json",contentType:"application/json",cache:!0,success:function(c,d,e){"object"===typeof window.console&&console.log("Fetched trending video json",
c,d,e);a.resolve(e,c)},error:function(c,d){"object"===typeof window.console&&console.log("Failed to fetch trending video json at: //analytics.posttv.com/trending-videos-overall.json, e: ",c);a.resolve(c)}}):a.resolve();return a.promise()}()).then(function(a,d){c.debug&&console.log("then()",a,d);a&&a[0]&&a[1]&&a[1][0]&&(c.json=a[1][0]);d&&d[0]&&d[1]&&(c.trendingJson=d[1])}).always(function(){c.debug&&console.log("always()");D(c.json)});return c};return function(a){c.json=e.json||{};c.trendingJson=
window.TWP&&TWP.videoDataId?d.parseJSON(d("#"+TWP.videoDataId+"-trending").html()):{};c.callback=e.onload||null;c.preparePlayerContainer(a);return c}(f)};TWP.PostTV.InlinePlayer=TWP.PostTV.InlinePlayer||TWP.PostTV.InlinePlayerJW;TWP.PostTV.initInlinePlayerJW=TWP.PostTV.initInlinePlayerJW||function(f,e){e=e||{};var c=d(f).filter(":not(.ooyala-player-processed)");c.size()&&(new TWP.PostTV.InlinePlayerJW(c.get(0),e),c.removeClass("ooyala-player").addClass("ooyala-player-processed"))};TWP.PostTV.initInlinePlayer=
TWP.PostTV.initInlinePlayer||TWP.PostTV.initInlinePlayerJW})(jQuery)}if("undefined"==typeof EMBED_PLAYER_TYPE){var isYoutubeEmbed=function(t){return t&&t.embedConfig&&t.embedConfig.embedType&&"youtube"==t.embedConfig.embedType.toLowerCase()},queryStringObj=queryStringObject(),videoJson=window.TWP&&TWP.videoDataId?$.parseJSON($("#"+TWP.videoDataId).html()):{};isYoutubeEmbed(videoJson)||jwPlayerWrapper()};
